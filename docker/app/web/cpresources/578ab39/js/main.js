!function(e){function t(t){for(var s,i,c=t[0],a=t[1],u=t[2],d=0,h=[];d<c.length;d++)i=c[d],r[i]&&h.push(r[i][0]),r[i]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);for(l&&l(t);h.length;)h.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},r={main:0},o=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=a;o.push([0,"vendor"]),n()}({"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/postcss-loader/src??embedded!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss ***!
  \********************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){},"./resources/js/RelatedEntryTypesField.ts":
/*!************************************************!*\
  !*** ./resources/js/RelatedEntryTypesField.ts ***!
  \************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=n(/*! ./components/ChannelGroup */"./resources/js/components/ChannelGroup.ts"),r=n(/*! ./components/EntryTypeGroup */"./resources/js/components/EntryTypeGroup.ts"),o=function(){function e(){var e=this;this.activeSections=[],this.fieldContainer=document.querySelector("#types-unionco-relatedentrytypes-fields-RelatedEntryType-sources-field");var t=document.querySelector("[data-related-entry-types-channels]");if(t){this.channelGroup=new s.default(t),this.activeSections=this.channelGroup.getActiveChannels();var n=JSON.parse(t.dataset.relatedEntryTypesChannels);this.sectionMap=n}var o=this.fieldContainer.querySelector("[data-entry-types-select-area]");o&&(this.entryTypeGroup=new r.default(o),this.entryTypeGroup.setEntryTypes(this.sectionMap.getEntryTypesByChannelArray(this.activeSections))),this.updateActiveSections=this.updateActiveSections.bind(this),this.fieldContainer.addEventListener("channelChange",function(t){var n=t.detail,s=n.all,r=n.active;console.log(n),e.updateActiveSections(s,r)}),console.log(this)}return e.prototype.updateActiveSections=function(e,t){this.activeSections=e?t?this.channelGroup.getChannels():[]:this.channelGroup.getActiveChannels(),console.log(this.activeSections)},e.fetchTemplates=function(e,t){var n={credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},method:"post",body:JSON.stringify({sectionUids:e,entryTypes:t})};return console.log(n),fetch("/admin/related-entry-types/types",n)},e}();t.default=o,new o},"./resources/js/components/AllChannel.ts":
/*!***********************************************!*\
  !*** ./resources/js/components/AllChannel.ts ***!
  \***********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s,r=n(/*! ./Channel */"./resources/js/components/Channel.ts"),o=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.checkboxChangeHandler=function(e){var t=e.target;this.active=t.checked;var n=new CustomEvent("channelChange",{detail:{sectionUid:this.uid,active:this.active,all:!0},bubbles:!0});return this.checkbox.dispatchEvent(n)},t}(r.default);t.default=i},"./resources/js/components/Channel.ts":
/*!********************************************!*\
  !*** ./resources/js/components/Channel.ts ***!
  \********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e){this.checkbox=e,this.active=e.checked;var t=e.value.match(/section\:(.*)/);t&&t.length&&(this.uid=t[0]),this.name=e.value;var n=document.querySelector('label[for="'+this.checkbox.id+'"]');n&&(this.label=n.innerText),this.checkboxChangeHandler=this.checkboxChangeHandler.bind(this),this.updateActiveStatus=this.updateActiveStatus.bind(this),this.checkbox.addEventListener("change",this.checkboxChangeHandler)}return e.prototype.updateActiveStatus=function(){this.active=this.checkbox.checked},e.prototype.checkboxChangeHandler=function(e){var t=e.target;this.active=t.checked;var n=new CustomEvent("channelChange",{detail:{sectionUid:this.uid,active:this.active,all:!1},bubbles:!0});return this.checkbox.dispatchEvent(n)},e}();t.default=s},"./resources/js/components/ChannelGroup.ts":
/*!*************************************************!*\
  !*** ./resources/js/components/ChannelGroup.ts ***!
  \*************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=n(/*! ./Channel */"./resources/js/components/Channel.ts"),r=n(/*! ./AllChannel */"./resources/js/components/AllChannel.ts"),o=function(){function e(e){this.node=e;var t=e.querySelectorAll('input[type="checkbox"]');this.channels=Array.from(t).map(function(e){return"*"===e.value?new r.default(e):new s.default(e)}),this.getActiveChannels=this.getActiveChannels.bind(this)}return e.prototype.getChannels=function(){return this.channels},e.prototype.getActiveChannels=function(){return this.channels.filter(function(e){return e.updateActiveStatus(),e.active})},e}();t.default=o},"./resources/js/components/EntryTypeGroup.ts":
/*!***************************************************!*\
  !*** ./resources/js/components/EntryTypeGroup.ts ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e){this.node=e}return e.prototype.render=function(){this.node.innerHTML="Hello, world"},e.prototype.setEntryTypes=function(e){this.entryTypes=e},e}();t.default=s},"./resources/scss/field.scss":
/*!***********************************!*\
  !*** ./resources/scss/field.scss ***!
  \***********************************/
/*! no static exports found */function(e,t,n){var s=n(/*! !../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader!../../node_modules/postcss-loader/src??embedded!../../node_modules/sass-loader/lib/loader.js!./field.scss */"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(/*! ../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(s,r);s.locals&&(e.exports=s.locals)},0:
/*!**********************************************************************************!*\
  !*** multi ./resources/js/RelatedEntryTypesField.ts ./resources/scss/field.scss ***!
  \**********************************************************************************/
/*! no static exports found */function(e,t,n){n(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/js/RelatedEntryTypesField.ts */"./resources/js/RelatedEntryTypesField.ts"),e.exports=n(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/scss/field.scss */"./resources/scss/field.scss")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL1JlbGF0ZWRFbnRyeVR5cGVzRmllbGQudHMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvQWxsQ2hhbm5lbC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9DaGFubmVsLnRzIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL0NoYW5uZWxHcm91cC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9FbnRyeVR5cGVHcm91cC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvc2Nzcy9maWVsZC5zY3NzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwibWFpbiIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9jb21wb25lbnRzX0NoYW5uZWxHcm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2NvbXBvbmVudHNfRW50cnlUeXBlR3JvdXBfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIlJlbGF0ZWRFbnRyeVR5cGVzRmllbGQiLCJfdGhpcyIsInRoaXMiLCJhY3RpdmVTZWN0aW9ucyIsImZpZWxkQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2hhbm5lbEdyb3VwQ29udGFpbmVyIiwiY2hhbm5lbEdyb3VwIiwiZ2V0QWN0aXZlQ2hhbm5lbHMiLCJzZWN0aW9uTWFwRGF0YSIsIkpTT04iLCJwYXJzZSIsImRhdGFzZXQiLCJyZWxhdGVkRW50cnlUeXBlc0NoYW5uZWxzIiwic2VjdGlvbk1hcCIsImVudHJ5VHlwZXNHcm91cENvbnRhaW5lciIsImVudHJ5VHlwZUdyb3VwIiwic2V0RW50cnlUeXBlcyIsImdldEVudHJ5VHlwZXNCeUNoYW5uZWxBcnJheSIsInVwZGF0ZUFjdGl2ZVNlY3Rpb25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJldmVudERldGFpbCIsImRldGFpbCIsImFsbCIsImFjdGl2ZSIsImNvbnNvbGUiLCJsb2ciLCJnZXRDaGFubmVscyIsImZldGNoVGVtcGxhdGVzIiwic2VjdGlvblVpZHMiLCJlbnRyeVR5cGVzIiwib3B0cyIsImNyZWRlbnRpYWxzIiwiaGVhZGVycyIsIlgtUmVxdWVzdGVkLVdpdGgiLCJtZXRob2QiLCJib2R5Iiwic3RyaW5naWZ5IiwiZmV0Y2giLCJBbGxDaGFubmVsIiwiX3N1cGVyIiwibm9kZSIsIl9fZXh0ZW5kcyIsImNoZWNrYm94Q2hhbmdlSGFuZGxlciIsImNoYW5nZUV2ZW50IiwidGFyZ2V0IiwiY2hlY2tlZCIsImV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJzZWN0aW9uVWlkIiwidWlkIiwiYnViYmxlcyIsImNoZWNrYm94IiwiZGlzcGF0Y2hFdmVudCIsIl9DaGFubmVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJDaGFubmVsIiwidWlkTWF0Y2giLCJtYXRjaCIsImxhYmVsIiwiaWQiLCJpbm5lclRleHQiLCJ1cGRhdGVBY3RpdmVTdGF0dXMiLCJfQWxsQ2hhbm5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiQ2hhbm5lbEdyb3VwIiwiY2hlY2tib3hlcyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGFubmVscyIsIkFycmF5IiwiZnJvbSIsIm1hcCIsImZpbHRlciIsImNoYW5uZWwiLCJFbnRyeVR5cGVHcm91cCIsInJlbmRlciIsImlubmVySFRNTCIsImNvbnRlbnQiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsInVuZGVmaW5lZCIsImxvY2FscyJdLCJtYXBwaW5ncyI6ImFBQ0EsU0FBQUEsRUFBQUMsR0FRQSxJQVBBLElBTUFDLEVBQUFDLEVBTkFDLEVBQUFILEVBQUEsR0FDQUksRUFBQUosRUFBQSxHQUNBSyxFQUFBTCxFQUFBLEdBSUFNLEVBQUEsRUFBQUMsRUFBQSxHQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJKLEVBQUFDLEVBQUFHLEdBQ0FHLEVBQUFQLElBQ0FLLEVBQUFHLEtBQUFELEVBQUFQLEdBQUEsSUFFQU8sRUFBQVAsR0FBQSxFQUVBLElBQUFELEtBQUFHLEVBQ0FPLE9BQUFDLFVBQUFDLGVBQUFDLEtBQUFWLEVBQUFILEtBQ0FjLEVBQUFkLEdBQUFHLEVBQUFILElBS0EsSUFGQWUsS0FBQWhCLEdBRUFPLEVBQUFDLFFBQ0FELEVBQUFVLE9BQUFWLEdBT0EsT0FIQVcsRUFBQVIsS0FBQVMsTUFBQUQsRUFBQWIsR0FBQSxJQUdBZSxJQUVBLFNBQUFBLElBRUEsSUFEQSxJQUFBQyxFQUNBZixFQUFBLEVBQWlCQSxFQUFBWSxFQUFBVixPQUE0QkYsSUFBQSxDQUc3QyxJQUZBLElBQUFnQixFQUFBSixFQUFBWixHQUNBaUIsR0FBQSxFQUNBQyxFQUFBLEVBQWtCQSxFQUFBRixFQUFBZCxPQUEyQmdCLElBQUEsQ0FDN0MsSUFBQUMsRUFBQUgsRUFBQUUsR0FDQSxJQUFBZixFQUFBZ0IsS0FBQUYsR0FBQSxHQUVBQSxJQUNBTCxFQUFBUSxPQUFBcEIsSUFBQSxHQUNBZSxFQUFBTSxJQUFBQyxFQUFBTixFQUFBLEtBR0EsT0FBQUQsRUFJQSxJQUFBUSxFQUFBLEdBS0FwQixFQUFBLENBQ0FxQixLQUFBLEdBR0FaLEVBQUEsR0FHQSxTQUFBUyxFQUFBMUIsR0FHQSxHQUFBNEIsRUFBQTVCLEdBQ0EsT0FBQTRCLEVBQUE1QixHQUFBOEIsUUFHQSxJQUFBQyxFQUFBSCxFQUFBNUIsR0FBQSxDQUNBSyxFQUFBTCxFQUNBZ0MsR0FBQSxFQUNBRixRQUFBLElBVUEsT0FOQWhCLEVBQUFkLEdBQUFhLEtBQUFrQixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSixHQUdBSyxFQUFBQyxHQUFBLEVBR0FELEVBQUFELFFBS0FKLEVBQUFPLEVBQUFuQixFQUdBWSxFQUFBUSxFQUFBTixFQUdBRixFQUFBUyxFQUFBLFNBQUFMLEVBQUFNLEVBQUFDLEdBQ0FYLEVBQUFZLEVBQUFSLEVBQUFNLElBQ0ExQixPQUFBNkIsZUFBQVQsRUFBQU0sRUFBQSxDQUEwQ0ksWUFBQSxFQUFBQyxJQUFBSixLQUsxQ1gsRUFBQWdCLEVBQUEsU0FBQVosR0FDQSxvQkFBQWEsZUFBQUMsYUFDQWxDLE9BQUE2QixlQUFBVCxFQUFBYSxPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEbkMsT0FBQTZCLGVBQUFULEVBQUEsY0FBaURlLE9BQUEsS0FRakRuQixFQUFBb0IsRUFBQSxTQUFBRCxFQUFBRSxHQUVBLEdBREEsRUFBQUEsSUFBQUYsRUFBQW5CLEVBQUFtQixJQUNBLEVBQUFFLEVBQUEsT0FBQUYsRUFDQSxLQUFBRSxHQUFBLGlCQUFBRixRQUFBRyxXQUFBLE9BQUFILEVBQ0EsSUFBQUksRUFBQXZDLE9BQUF3QyxPQUFBLE1BR0EsR0FGQXhCLEVBQUFnQixFQUFBTyxHQUNBdkMsT0FBQTZCLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBbkIsRUFBQVMsRUFBQWMsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBdkIsRUFBQTJCLEVBQUEsU0FBQXRCLEdBQ0EsSUFBQU0sRUFBQU4sS0FBQWlCLFdBQ0EsV0FBMkIsT0FBQWpCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUwsRUFBQVMsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWCxFQUFBWSxFQUFBLFNBQUFnQixFQUFBQyxHQUFzRCxPQUFBN0MsT0FBQUMsVUFBQUMsZUFBQUMsS0FBQXlDLEVBQUFDLElBR3REN0IsRUFBQThCLEVBQUEsR0FFQSxJQUFBQyxFQUFBQyxPQUFBLGFBQUFBLE9BQUEsaUJBQ0FDLEVBQUFGLEVBQUFoRCxLQUFBMkMsS0FBQUssR0FDQUEsRUFBQWhELEtBQUFYLEVBQ0EyRCxJQUFBRyxRQUNBLFFBQUF2RCxFQUFBLEVBQWdCQSxFQUFBb0QsRUFBQWxELE9BQXVCRixJQUFBUCxFQUFBMkQsRUFBQXBELElBQ3ZDLElBQUFVLEVBQUE0QyxFQUlBMUMsRUFBQVIsS0FBQSxjQUVBVTs7Ozs7Ozs7NkRDckpBTyxFQUFBZ0IsRUFBQW1CLEdBQUEsSUFBQUMsRUFBQXBDLGtDQUFBLDZDQUFBcUMsRUFBQXJDLG9DQUFBLCtDQU9Bc0MsRUFBQSxXQU9JLFNBQUFBLElBQUEsSUFBQUMsRUFBQUMsS0FDSUEsS0FBS0MsZUFBaUIsR0FDdEJELEtBQUtFLGVBQWlCQyxTQUFTQyxjQUFjLDBFQUc3QyxJQUFNQyxFQUF3Q0YsU0FBU0MsY0FBYyx1Q0FDckUsR0FBSUMsRUFBdUIsQ0FDdkJMLEtBQUtNLGFBQWUsSUFBSVYsRUFBQSxRQUFhUyxHQUNyQ0wsS0FBS0MsZUFBaUJELEtBQUtNLGFBQWFDLG9CQUN4QyxJQUFNQyxFQUE4QkMsS0FBS0MsTUFBTUwsRUFBc0JNLFFBQVFDLDJCQUM3RVosS0FBS2EsV0FBYUwsRUFHdEIsSUFBTU0sRUFBMkNkLEtBQUtFLGVBQWVFLGNBQWMsa0NBQy9FVSxJQUNBZCxLQUFLZSxlQUFpQixJQUFJbEIsRUFBQSxRQUFlaUIsR0FFekNkLEtBQUtlLGVBQWVDLGNBQWNoQixLQUFLYSxXQUFXSSw0QkFBNEJqQixLQUFLQyxrQkFJdkZELEtBQUtrQixxQkFBdUJsQixLQUFLa0IscUJBQXFCaEMsS0FBS2MsTUFHM0RBLEtBQUtFLGVBQWVpQixpQkFBaUIsZ0JBQWlCLFNBQUNDLEdBQ25ELElBQU1DLEVBQWNELEVBQUVFLE9BQ2RDLEVBQUFGLEVBQUFFLElBQUtDLEVBQUFILEVBQUFHLE9BQ2JDLFFBQVFDLElBQUlMLEdBQ1p0QixFQUFLbUIscUJBQXFCSyxFQUFLQyxLQUduQ0MsUUFBUUMsSUFBSTFCLE1BbUNwQixPQS9CV0YsRUFBQXJELFVBQUF5RSxxQkFBUCxTQUE0QkssRUFBY0MsR0FHOUJ4QixLQUFLQyxlQUZUc0IsRUFDSUMsRUFDc0J4QixLQUFLTSxhQUFhcUIsY0FFbEIsR0FHSjNCLEtBQUtNLGFBQWFDLG9CQUc1Q2tCLFFBQVFDLElBQUkxQixLQUFLQyxpQkFHUEgsRUFBQThCLGVBQWQsU0FBNkJDLEVBQXVCQyxHQUNoRCxJQUFNQyxFQUFvQixDQUN0QkMsWUFBYSxjQUNiQyxRQUFTLENBQ0xDLG1CQUFvQixrQkFFeEJDLE9BQVEsT0FDUkMsS0FBTTNCLEtBQUs0QixVQUFVLENBQ2pCUixZQUFlQSxFQUNmQyxXQUFjQSxLQUl0QixPQURBTCxRQUFRQyxJQUFJSyxHQUNMTyxNQUFNLG1DQUFvQ1AsSUFJekRqQyxFQXpFQSxlQTJFQSxJQUFJQTs7OzswYkNoRkp5QyxFQUFBLFNBQUFDLEdBQ0ksU0FBQUQsRUFBWUUsVUFDUkQsRUFBQTdGLEtBQUFxRCxLQUFNeUMsSUFBS3pDLEtBa0JuQixPQXBCd0MwQyxFQUFBSCxFQUFBQyxHQUs3QkQsRUFBQTlGLFVBQUFrRyxzQkFBUCxTQUE2QkMsR0FDekIsSUFBTUMsRUFBMkJELEVBQVlDLE9BQzdDN0MsS0FBS3dCLE9BQVNxQixFQUFPQyxRQUVyQixJQUFNQyxFQUFRLElBQUlDLFlBQVksZ0JBQWlCLENBQzNDMUIsT0FBUSxDQUNKMkIsV0FBWWpELEtBQUtrRCxJQUNqQjFCLE9BQVF4QixLQUFLd0IsT0FDYkQsS0FBSyxHQUVUNEIsU0FBUyxJQUdiLE9BQU9uRCxLQUFLb0QsU0FBU0MsY0FBY04sSUFFM0NSLEVBcEJBLENBQXdDZSxFQUFBOzs7OzZEQ0R4QzlGLEVBQUFnQixFQUFBbUIsR0FBQSxJQUFBNEQsRUFBQSxXQU9JLFNBQUFBLEVBQVlkLEdBQ1J6QyxLQUFLb0QsU0FBV1gsRUFDaEJ6QyxLQUFLd0IsT0FBU2lCLEVBQUtLLFFBRW5CLElBQU1VLEVBQVdmLEVBQUs5RCxNQUFNOEUsTUFBTSxpQkFFOUJELEdBQVlBLEVBQVNuSCxTQUNyQjJELEtBQUtrRCxJQUFNTSxFQUFTLElBR3hCeEQsS0FBSzlCLEtBQU91RSxFQUFLOUQsTUFDakIsSUFBTStFLEVBQTBCdkQsU0FBU0MsY0FBYyxjQUFjSixLQUFLb0QsU0FBU08sR0FBRSxNQUVqRkQsSUFDQTFELEtBQUswRCxNQUFRQSxFQUFNRSxXQUl2QjVELEtBQUsyQyxzQkFBd0IzQyxLQUFLMkMsc0JBQXNCekQsS0FBS2MsTUFDN0RBLEtBQUs2RCxtQkFBcUI3RCxLQUFLNkQsbUJBQW1CM0UsS0FBS2MsTUFFdkRBLEtBQUtvRCxTQUFTakMsaUJBQWlCLFNBQVVuQixLQUFLMkMsdUJBc0J0RCxPQW5CV1ksRUFBQTlHLFVBQUFvSCxtQkFBUCxXQUNJN0QsS0FBS3dCLE9BQVN4QixLQUFLb0QsU0FBU04sU0FHekJTLEVBQUE5RyxVQUFBa0csc0JBQVAsU0FBNkJDLEdBQ3pCLElBQU1DLEVBQTJCRCxFQUFZQyxPQUM3QzdDLEtBQUt3QixPQUFTcUIsRUFBT0MsUUFFckIsSUFBTUMsRUFBUSxJQUFJQyxZQUFZLGdCQUFpQixDQUMzQzFCLE9BQVEsQ0FDSjJCLFdBQVlqRCxLQUFLa0QsSUFDakIxQixPQUFReEIsS0FBS3dCLE9BQ2JELEtBQUssR0FFVDRCLFNBQVMsSUFHYixPQUFPbkQsS0FBS29ELFNBQVNDLGNBQWNOLElBRTNDUSxFQWxEQTs7Ozs2RENBQS9GLEVBQUFnQixFQUFBbUIsR0FBQSxJQUFBMkQsRUFBQTlGLGtCQUFBLHdDQUFBc0csRUFBQXRHLHFCQUFBLDJDQUdBdUcsRUFBQSxXQUlJLFNBQUFBLEVBQVl0QixHQUNSekMsS0FBS3lDLEtBQU9BLEVBQ1osSUFBTXVCLEVBQTJDdkIsRUFBS3dCLGlCQUFpQiwwQkFDdkVqRSxLQUFLa0UsU0FBV0MsTUFBTUMsS0FBS0osR0FDdEJLLElBQUksU0FBQ2pCLEdBQ0YsTUFBdUIsTUFBbkJBLEVBQVN6RSxNQUNGLElBQUltRixFQUFBLFFBQVdWLEdBRWYsSUFBSUUsRUFBQSxRQUFRRixLQUkvQnBELEtBQUtPLGtCQUFvQlAsS0FBS08sa0JBQWtCckIsS0FBS2MsTUFhN0QsT0FWVytELEVBQUF0SCxVQUFBa0YsWUFBUCxXQUNJLE9BQU8zQixLQUFLa0UsVUFHVEgsRUFBQXRILFVBQUE4RCxrQkFBUCxXQUNJLE9BQU9QLEtBQUtrRSxTQUFTSSxPQUFPLFNBQUNDLEdBRXpCLE9BREFBLEVBQVFWLHFCQUNEVSxFQUFRL0MsVUFHM0J1QyxFQTdCQTs7Ozs2RENGQXZHLEVBQUFnQixFQUFBbUIsR0FBQSxJQUFBNkUsRUFBQSxXQUlJLFNBQUFBLEVBQVkxRCxHQUNSZCxLQUFLeUMsS0FBTzNCLEVBVXBCLE9BUFcwRCxFQUFBL0gsVUFBQWdJLE9BQVAsV0FDSXpFLEtBQUt5QyxLQUFLaUMsVUFBWSxnQkFHbkJGLEVBQUEvSCxVQUFBdUUsY0FBUCxTQUFxQmMsR0FDakI5QixLQUFLOEIsV0FBYUEsR0FFMUIwQyxFQWZBOzs7OzhDQ0ZBLElBQUFHLEVBQWNuSCwyTUFBUSw2TUFFdEIsaUJBQUFtSCxNQUFBLEVBQTRDOUcsRUFBQTFCLEVBQVN3SSxFQUFBLE1BT3JELElBQUFDLEVBQUEsQ0FBZUMsS0FBQSxFQUVmQyxlQVBBQSxFQVFBQyxnQkFBQUMsR0FFYXhILHlEQUFRLCtDQUFSQSxDQUEyRG1ILEVBQUFDLEdBRXhFRCxFQUFBTSxTQUFBcEgsRUFBQUQsUUFBQStHLEVBQUFNIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdGZ1bmN0aW9uIHdlYnBhY2tKc29ucENhbGxiYWNrKGRhdGEpIHtcbiBcdFx0dmFyIGNodW5rSWRzID0gZGF0YVswXTtcbiBcdFx0dmFyIG1vcmVNb2R1bGVzID0gZGF0YVsxXTtcbiBcdFx0dmFyIGV4ZWN1dGVNb2R1bGVzID0gZGF0YVsyXTtcblxuIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbiBcdFx0Ly8gdGhlbiBmbGFnIGFsbCBcImNodW5rSWRzXCIgYXMgbG9hZGVkIGFuZCBmaXJlIGNhbGxiYWNrXG4gXHRcdHZhciBtb2R1bGVJZCwgY2h1bmtJZCwgaSA9IDAsIHJlc29sdmVzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSkge1xuIFx0XHRcdFx0cmVzb2x2ZXMucHVzaChpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF1bMF0pO1xuIFx0XHRcdH1cbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdGlmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb3JlTW9kdWxlcywgbW9kdWxlSWQpKSB7XG4gXHRcdFx0XHRtb2R1bGVzW21vZHVsZUlkXSA9IG1vcmVNb2R1bGVzW21vZHVsZUlkXTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihkYXRhKTtcblxuIFx0XHR3aGlsZShyZXNvbHZlcy5sZW5ndGgpIHtcbiBcdFx0XHRyZXNvbHZlcy5zaGlmdCgpKCk7XG4gXHRcdH1cblxuIFx0XHQvLyBhZGQgZW50cnkgbW9kdWxlcyBmcm9tIGxvYWRlZCBjaHVuayB0byBkZWZlcnJlZCBsaXN0XG4gXHRcdGRlZmVycmVkTW9kdWxlcy5wdXNoLmFwcGx5KGRlZmVycmVkTW9kdWxlcywgZXhlY3V0ZU1vZHVsZXMgfHwgW10pO1xuXG4gXHRcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gYWxsIGNodW5rcyByZWFkeVxuIFx0XHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiBcdH07XG4gXHRmdW5jdGlvbiBjaGVja0RlZmVycmVkTW9kdWxlcygpIHtcbiBcdFx0dmFyIHJlc3VsdDtcbiBcdFx0Zm9yKHZhciBpID0gMDsgaSA8IGRlZmVycmVkTW9kdWxlcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdHZhciBkZWZlcnJlZE1vZHVsZSA9IGRlZmVycmVkTW9kdWxlc1tpXTtcbiBcdFx0XHR2YXIgZnVsZmlsbGVkID0gdHJ1ZTtcbiBcdFx0XHRmb3IodmFyIGogPSAxOyBqIDwgZGVmZXJyZWRNb2R1bGUubGVuZ3RoOyBqKyspIHtcbiBcdFx0XHRcdHZhciBkZXBJZCA9IGRlZmVycmVkTW9kdWxlW2pdO1xuIFx0XHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2RlcElkXSAhPT0gMCkgZnVsZmlsbGVkID0gZmFsc2U7XG4gXHRcdFx0fVxuIFx0XHRcdGlmKGZ1bGZpbGxlZCkge1xuIFx0XHRcdFx0ZGVmZXJyZWRNb2R1bGVzLnNwbGljZShpLS0sIDEpO1xuIFx0XHRcdFx0cmVzdWx0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSBkZWZlcnJlZE1vZHVsZVswXSk7XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdHJldHVybiByZXN1bHQ7XG4gXHR9XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyB1bmRlZmluZWQgPSBjaHVuayBub3QgbG9hZGVkLCBudWxsID0gY2h1bmsgcHJlbG9hZGVkL3ByZWZldGNoZWRcbiBcdC8vIFByb21pc2UgPSBjaHVuayBsb2FkaW5nLCAwID0gY2h1bmsgbG9hZGVkXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHRcIm1haW5cIjogMFxuIFx0fTtcblxuIFx0dmFyIGRlZmVycmVkTW9kdWxlcyA9IFtdO1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHR2YXIganNvbnBBcnJheSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSA9IHdpbmRvd1tcIndlYnBhY2tKc29ucFwiXSB8fCBbXTtcbiBcdHZhciBvbGRKc29ucEZ1bmN0aW9uID0ganNvbnBBcnJheS5wdXNoLmJpbmQoanNvbnBBcnJheSk7XG4gXHRqc29ucEFycmF5LnB1c2ggPSB3ZWJwYWNrSnNvbnBDYWxsYmFjaztcbiBcdGpzb25wQXJyYXkgPSBqc29ucEFycmF5LnNsaWNlKCk7XG4gXHRmb3IodmFyIGkgPSAwOyBpIDwganNvbnBBcnJheS5sZW5ndGg7IGkrKykgd2VicGFja0pzb25wQ2FsbGJhY2soanNvbnBBcnJheVtpXSk7XG4gXHR2YXIgcGFyZW50SnNvbnBGdW5jdGlvbiA9IG9sZEpzb25wRnVuY3Rpb247XG5cblxuIFx0Ly8gYWRkIGVudHJ5IG1vZHVsZSB0byBkZWZlcnJlZCBsaXN0XG4gXHRkZWZlcnJlZE1vZHVsZXMucHVzaChbMCxcInZlbmRvclwiXSk7XG4gXHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIHJlYWR5XG4gXHRyZXR1cm4gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKTtcbiIsImltcG9ydCBJQ2hhbm5lbEdyb3VwIGZyb20gJy4vaW50ZXJmYWNlcy9JQ2hhbm5lbEdyb3VwJztcbmltcG9ydCBDaGFubmVsR3JvdXAgZnJvbSAnLi9jb21wb25lbnRzL0NoYW5uZWxHcm91cCc7XG5pbXBvcnQgSVNlY3Rpb25NYXAgZnJvbSAnLi9pbnRlcmZhY2VzL0lTZWN0aW9uTWFwJztcbmltcG9ydCBJQ2hhbm5lbCBmcm9tICcuL2ludGVyZmFjZXMvSUNoYW5uZWwnO1xuaW1wb3J0IFNlY3Rpb25NYXAgZnJvbSAnLi9jb21wb25lbnRzL1NlY3Rpb25NYXAnO1xuaW1wb3J0IEVudHJ5VHlwZUdyb3VwIGZyb20gJy4vY29tcG9uZW50cy9FbnRyeVR5cGVHcm91cCc7XG5pbXBvcnQgSUVudHJ5VHlwZUdyb3VwIGZyb20gJy4vaW50ZXJmYWNlcy9JRW50cnlUeXBlR3JvdXAnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWxhdGVkRW50cnlUeXBlc0ZpZWxkIHtcbiAgICBwdWJsaWMgY2hhbm5lbEdyb3VwOiBJQ2hhbm5lbEdyb3VwO1xuICAgIHB1YmxpYyBmaWVsZENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHVibGljIGVudHJ5VHlwZUdyb3VwOiBJRW50cnlUeXBlR3JvdXA7XG4gICAgcHJpdmF0ZSBzZWN0aW9uTWFwOiBJU2VjdGlvbk1hcDtcbiAgICBwdWJsaWMgYWN0aXZlU2VjdGlvbnM6IElDaGFubmVsW107XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IFtdO1xuICAgICAgICB0aGlzLmZpZWxkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3R5cGVzLXVuaW9uY28tcmVsYXRlZGVudHJ5dHlwZXMtZmllbGRzLVJlbGF0ZWRFbnRyeVR5cGUtc291cmNlcy1maWVsZCcpO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIGNoYW5uZWxzIHNlbGVjdCBhcmVhXG4gICAgICAgIGNvbnN0IGNoYW5uZWxHcm91cENvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1yZWxhdGVkLWVudHJ5LXR5cGVzLWNoYW5uZWxzXScpO1xuICAgICAgICBpZiAoY2hhbm5lbEdyb3VwQ29udGFpbmVyKSB7XG4gICAgICAgICAgICB0aGlzLmNoYW5uZWxHcm91cCA9IG5ldyBDaGFubmVsR3JvdXAoY2hhbm5lbEdyb3VwQ29udGFpbmVyKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU2VjdGlvbnMgPSB0aGlzLmNoYW5uZWxHcm91cC5nZXRBY3RpdmVDaGFubmVscygpOyAvLy5tYXAoKGNoYW5uZWw6IElDaGFubmVsKSA9PiBjaGFubmVsLnVpZCk7XG4gICAgICAgICAgICBjb25zdCBzZWN0aW9uTWFwRGF0YTogSVNlY3Rpb25NYXAgPSBKU09OLnBhcnNlKGNoYW5uZWxHcm91cENvbnRhaW5lci5kYXRhc2V0LnJlbGF0ZWRFbnRyeVR5cGVzQ2hhbm5lbHMpO1xuICAgICAgICAgICAgdGhpcy5zZWN0aW9uTWFwID0gc2VjdGlvbk1hcERhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRyeVR5cGVzR3JvdXBDb250YWluZXI6IEhUTUxEaXZFbGVtZW50ID0gdGhpcy5maWVsZENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCdbZGF0YS1lbnRyeS10eXBlcy1zZWxlY3QtYXJlYV0nKTtcbiAgICAgICAgaWYgKGVudHJ5VHlwZXNHcm91cENvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5lbnRyeVR5cGVHcm91cCA9IG5ldyBFbnRyeVR5cGVHcm91cChlbnRyeVR5cGVzR3JvdXBDb250YWluZXIpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB0aGlzLmVudHJ5VHlwZUdyb3VwLnNldEVudHJ5VHlwZXModGhpcy5zZWN0aW9uTWFwLmdldEVudHJ5VHlwZXNCeUNoYW5uZWxBcnJheSh0aGlzLmFjdGl2ZVNlY3Rpb25zKSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXRob2QgYmluZGluZ1xuICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZVNlY3Rpb25zID0gdGhpcy51cGRhdGVBY3RpdmVTZWN0aW9ucy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIC8vIEV2ZW50IExpc3RlbmVyc1xuICAgICAgICB0aGlzLmZpZWxkQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5uZWxDaGFuZ2UnLCAoZTogQ3VzdG9tRXZlbnQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50RGV0YWlsID0gZS5kZXRhaWw7XG4gICAgICAgICAgICBjb25zdCB7IGFsbCwgYWN0aXZlIH0gPSBldmVudERldGFpbDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGV2ZW50RGV0YWlsKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlQWN0aXZlU2VjdGlvbnMoYWxsLCBhY3RpdmUpOyAvLyBzZWN0aW9uVWlkLCBhY3RpdmUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzKTtcblxuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVBY3RpdmVTZWN0aW9ucyhhbGw6IGJvb2xlYW4sIGFjdGl2ZTogYm9vbGVhbikge1xuICAgICAgICBpZiAoYWxsKSB7XG4gICAgICAgICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IHRoaXMuY2hhbm5lbEdyb3VwLmdldENoYW5uZWxzKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU2VjdGlvbnMgPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU2VjdGlvbnMgPSB0aGlzLmNoYW5uZWxHcm91cC5nZXRBY3RpdmVDaGFubmVscygpO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc29sZS5sb2codGhpcy5hY3RpdmVTZWN0aW9ucyk7XG4gICAgfVxuXG4gICAgcHVibGljIHN0YXRpYyBmZXRjaFRlbXBsYXRlcyhzZWN0aW9uVWlkczogc3RyaW5nW10sIGVudHJ5VHlwZXM6IHN0cmluZ1tdKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgICAgICBjb25zdCBvcHRzOiBSZXF1ZXN0SW5pdCA9IHtcbiAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLFxuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0JyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtZXRob2Q6ICdwb3N0JyxcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBcInNlY3Rpb25VaWRzXCI6IHNlY3Rpb25VaWRzLFxuICAgICAgICAgICAgICAgIFwiZW50cnlUeXBlc1wiOiBlbnRyeVR5cGVzXG4gICAgICAgICAgICB9KVxuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZyhvcHRzKTtcbiAgICAgICAgcmV0dXJuIGZldGNoKCcvYWRtaW4vcmVsYXRlZC1lbnRyeS10eXBlcy90eXBlcycsIG9wdHMpO1xuICAgICAgICAvLyAudGhlbihyZXNwID0+eiByZXNwLnRleHQoKSlcbiAgICAgICAgLy8gLnRoZW4oZGF0YSA9PiByZXNvbHZlKGRhdGEpKTtcbiAgICB9XG59XG5cbm5ldyBSZWxhdGVkRW50cnlUeXBlc0ZpZWxkKCk7XG5cbi8vIGNvbnN0IGFqYXhPcHRzID0ge1xuLy8gICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLFxuLy8gICAgIGhlYWRlcnM6IHtcbi8vICAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLFxuLy8gICAgIH1cbi8vIH07XG5cbi8vIGNsYXNzIEVudHJ5VHlwZSB7XG4vLyAgICAgY29uc3RydWN0b3IoKSB7XG4vLyAgICAgICAgIHRoaXMuZmllbGRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHlwZXMtdW5pb25jby1yZWxhdGVkZW50cnl0eXBlcy1maWVsZHMtRW50cnlUeXBlLXNvdXJjZXMtZmllbGQnKTtcbi8vICAgICAgICAgaWYgKHRoaXMuZmllbGRDb250YWluZXIpIHtcbi8vICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkNoZWNrYm94ZXMgPSB0aGlzLmZpZWxkQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuLy8gICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5zZWN0aW9uQ2hlY2tib3hlcyk7XG4vLyAgICAgICAgICAgICBpZiAodGhpcy5zZWN0aW9uQ2hlY2tib3hlcykge1xuLy8gICAgICAgICAgICAgICAgIHRoaXMuc2VjdGlvbkNoZWNrYm94ZXMuZm9yRWFjaChjaGVja2JveCA9PiBjaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmhhbmRsZVNvdXJjZXNDaGFuZ2UuYmluZCh0aGlzKSkpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9XG5cbi8vICAgICAgICAgdGhpcy5lbnRyeVR5cGVzU2VsZWN0QXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWVudHJ5LXR5cGVzLXNlbGVjdC1hcmVhXScpO1xuLy8gICAgICAgICB0aGlzLmdldFNlbGVjdGVkU2VjdGlvbnMgPSB0aGlzLmdldFNlbGVjdGVkU2VjdGlvbnMuYmluZCh0aGlzKTtcbi8vICAgICB9XG5cbi8vICAgICBnZXRTZWxlY3RlZFNlY3Rpb25zKCkge1xuLy8gICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHRoaXMuc2VjdGlvbkNoZWNrYm94ZXMsIGNoZWNrYm94ID0+IHtcbi8vICAgICAgICAgICAgIC8vY29uc29sZS5sb2coY2hlY2tib3gpO1xuLy8gICAgICAgICAgICAgcmV0dXJuIGNoZWNrYm94LmNoZWNrZWQgfHwgZmFsc2U7XG4vLyAgICAgICAgIH0pLm1hcChjaGVja2JveCA9PiB7XG4vLyAgICAgICAgICAgICByZXR1cm4gY2hlY2tib3gudmFsdWU7XG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH1cblxuLy8gICAgIGdldFNlbGVjdGVkRW50cnlUeXBlcygpIHtcbi8vICAgICAgICAgY29uc3QgZW50cnlUeXBlc1NlY3Rpb24gPSB0aGlzLmVudHJ5VHlwZXNTZWxlY3RBcmVhLnF1ZXJ5U2VsZWN0b3IoJ2RpdicpO1xuLy8gICAgICAgICBpZiAoZW50cnlUeXBlc1NlY3Rpb24pIHtcbi8vICAgICAgICAgICAgIGNvbnN0IGVudHJ5VHlwZUNoZWNrYm94ZXMgPSBlbnRyeVR5cGVzU2VjdGlvbi5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVudHJ5VHlwZUNoZWNrYm94ZXMpO1xuLy8gICAgICAgICAgICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbChlbnRyeVR5cGVDaGVja2JveGVzLCBjaGVja2JveCA9PiB7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrYm94LmNoZWNrZWQ7XG4vLyAgICAgICAgICAgICB9KS5tYXAoY2hlY2tib3ggPT4ge1xuLy8gICAgICAgICAgICAgICAgIHJldHVybiBjaGVja2JveC52YWx1ZTtcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICB9XG5cbi8vICAgICAgICAgcmV0dXJuIG51bGw7XG4vLyAgICAgfVxuXG4vLyAgICAgaGFuZGxlU291cmNlc0NoYW5nZShlKSB7XG4vLyAgICAgICAgIGNvbnN0IHNlbGVjdGVkU2VjdGlvbnMgPSB0aGlzLmdldFNlbGVjdGVkU2VjdGlvbnMoKTtcbi8vICAgICAgICAgY29uc3Qgc2VsZWN0ZWRFbnRyeVR5cGVzID0gdGhpcy5nZXRTZWxlY3RlZEVudHJ5VHlwZXMoKTtcblxuLy8gICAgICAgICBpZiAoc2VsZWN0ZWRTZWN0aW9ucy5sZW5ndGggPCAxKSB7XG4vLyAgICAgICAgICAgICB0aGlzLmVudHJ5VHlwZXNTZWxlY3RBcmVhLmlubmVySFRNTCA9ICcnO1xuLy8gICAgICAgICB9XG4vLyAgICAgICAgIEFwaUNsaWVudC5nZXRUZW1wbGF0ZShzZWxlY3RlZFNlY3Rpb25zLCBzZWxlY3RlZEVudHJ5VHlwZXMpXG4vLyAgICAgICAgICAgICAudGhlbihkYXRhID0+IHtcbi8vICAgICAgICAgICAgICAgICB0aGlzLmVudHJ5VHlwZXNTZWxlY3RBcmVhLmlubmVySFRNTCA9IGRhdGE7XG4vLyAgICAgICAgICAgICB9KTtcbi8vICAgICB9XG4vLyB9XG5cbi8vIGNsYXNzIEFwaUNsaWVudCB7XG4vLyAgICAgc3RhdGljIGdldFRlbXBsYXRlKHNlY3Rpb25VaWRzLCBlbnRyeVR5cGVzKSB7XG4vLyAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4vLyAgICAgICAgICAgICBsZXQgb3B0cyA9IHtcbi8vICAgICAgICAgICAgICAgICBjcmVkZW50aWFsczogJ3NhbWUtb3JpZ2luJyxcbi8vICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4vLyAgICAgICAgICAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0Jyxcbi8vICAgICAgICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuLy8gICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbi8vICAgICAgICAgICAgICAgICAgICAgXCJzZWN0aW9uVWlkc1wiOiBzZWN0aW9uVWlkcyxcbi8vICAgICAgICAgICAgICAgICAgICAgXCJlbnRyeVR5cGVzXCI6IGVudHJ5VHlwZXNcbi8vICAgICAgICAgICAgICAgICB9KVxuLy8gICAgICAgICAgICAgfTtcbi8vICAgICAgICAgICAgIGNvbnNvbGUubG9nKG9wdHMpO1xuLy8gICAgICAgICAgICAgZmV0Y2goJy9hZG1pbi9yZWxhdGVkLWVudHJ5LXR5cGVzL3R5cGVzJywgb3B0cylcbi8vICAgICAgICAgICAgICAgICAudGhlbihyZXNwID0+IHJlc3AudGV4dCgpKVxuLy8gICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4gcmVzb2x2ZShkYXRhKSk7XG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH1cbi8vIH1cblxuLy8gKGZ1bmN0aW9uICgkLCB3aW5kb3csIGRvY3VtZW50LCB1bmRlZmluZWQpIHtcblxuLy8gICAgIHZhciBwbHVnaW5OYW1lID0gXCJSZWxhdGVkRW50cnlUeXBlc1wiLFxuLy8gICAgICAgICBkZWZhdWx0cyA9IHt9O1xuXG4vLyAgICAgLy8gUGx1Z2luIGNvbnN0cnVjdG9yXG4vLyAgICAgZnVuY3Rpb24gUGx1Z2luKGVsZW1lbnQsIG9wdGlvbnMpIHtcbi8vICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcblxuLy8gICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4vLyAgICAgICAgIHRoaXMuX2RlZmF1bHRzID0gZGVmYXVsdHM7XG4vLyAgICAgICAgIHRoaXMuX25hbWUgPSBwbHVnaW5OYW1lO1xuXG4vLyAgICAgICAgIHRoaXMuaW5pdCgpO1xuLy8gICAgIH1cblxuLy8gICAgIFBsdWdpbi5wcm90b3R5cGUgPSB7XG5cbi8vICAgICAgICAgaW5pdDogZnVuY3Rpb24gKGlkKSB7XG4vLyAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4vLyAgICAgICAgICAgICAkKGZ1bmN0aW9uICgpIHtcblxuLy8gICAgICAgICAgICAgICAgIC8qIC0tIF90aGlzLm9wdGlvbnMgZ2l2ZXMgdXMgYWNjZXNzIHRvIHRoZSAkanNvblZhcnMgdGhhdCBvdXIgRmllbGRUeXBlIHBhc3NlZCBkb3duIHRvIHVzICovXG5cbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgICAgICB9XG4vLyAgICAgfTtcblxuLy8gICAgIC8vIEEgcmVhbGx5IGxpZ2h0d2VpZ2h0IHBsdWdpbiB3cmFwcGVyIGFyb3VuZCB0aGUgY29uc3RydWN0b3IsXG4vLyAgICAgLy8gcHJldmVudGluZyBhZ2FpbnN0IG11bHRpcGxlIGluc3RhbnRpYXRpb25zXG4vLyAgICAgJC5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4vLyAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICAgICAgaWYgKCEkLmRhdGEodGhpcywgXCJwbHVnaW5fXCIgKyBwbHVnaW5OYW1lKSkge1xuLy8gICAgICAgICAgICAgICAgICQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUsXG4vLyAgICAgICAgICAgICAgICAgICAgIG5ldyBQbHVnaW4odGhpcywgb3B0aW9ucykpO1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICB9KTtcbi8vICAgICB9O1xuXG4vLyB9KShqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQpO1xuXG4vLyB3aW5kb3cuUmVsYXRlZEVudHJ5VHlwZXNGaWVsZCA9IFJlbGF0ZWRFbnRyeVR5cGVzRmllbGQ7IiwiaW1wb3J0IElDaGFubmVsIGZyb20gXCIuLi9pbnRlcmZhY2VzL0lDaGFubmVsXCI7XG5pbXBvcnQgQ2hhbm5lbCBmcm9tICcuL0NoYW5uZWwnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBBbGxDaGFubmVsIGV4dGVuZHMgQ2hhbm5lbCBpbXBsZW1lbnRzIElDaGFubmVsIHtcbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBIVE1MSW5wdXRFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKG5vZGUpO1xuICAgIH1cblxuICAgIHB1YmxpYyBjaGVja2JveENoYW5nZUhhbmRsZXIoY2hhbmdlRXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHRhcmdldDogSFRNTElucHV0RWxlbWVudCA9IGNoYW5nZUV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRhcmdldC5jaGVja2VkO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGFubmVsQ2hhbmdlJywge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgc2VjdGlvblVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0aGlzLmFjdGl2ZSxcbiAgICAgICAgICAgICAgICBhbGw6IHRydWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrYm94LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbn0iLCJpbXBvcnQgSUNoYW5uZWwgZnJvbSBcIi4uL2ludGVyZmFjZXMvSUNoYW5uZWxcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbm5lbCBpbXBsZW1lbnRzIElDaGFubmVsIHtcbiAgICBwcm90ZWN0ZWQgY2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgICBwdWJsaWMgbGFiZWw6IHN0cmluZztcbiAgICBwdWJsaWMgdWlkOiBzdHJpbmc7XG4gICAgcHVibGljIGFjdGl2ZTogYm9vbGVhbjtcblxuICAgIGNvbnN0cnVjdG9yKG5vZGU6IEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5jaGVja2JveCA9IG5vZGU7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gbm9kZS5jaGVja2VkO1xuXG4gICAgICAgIGNvbnN0IHVpZE1hdGNoID0gbm9kZS52YWx1ZS5tYXRjaCgvc2VjdGlvblxcOiguKikvKTtcbiAgICAgICAgICAgIFxuICAgICAgICBpZiAodWlkTWF0Y2ggJiYgdWlkTWF0Y2gubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnVpZCA9IHVpZE1hdGNoWzBdO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5uYW1lID0gbm9kZS52YWx1ZTtcbiAgICAgICAgY29uc3QgbGFiZWw6IEhUTUxMYWJlbEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBsYWJlbFtmb3I9XCIke3RoaXMuY2hlY2tib3guaWR9XCJdYCk7XG4gICAgICAgIFxuICAgICAgICBpZiAobGFiZWwpIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWwgPSBsYWJlbC5pbm5lclRleHQ7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNZXRob2QgYmluZGluZ1xuICAgICAgICB0aGlzLmNoZWNrYm94Q2hhbmdlSGFuZGxlciA9IHRoaXMuY2hlY2tib3hDaGFuZ2VIYW5kbGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMudXBkYXRlQWN0aXZlU3RhdHVzID0gdGhpcy51cGRhdGVBY3RpdmVTdGF0dXMuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuY2hlY2tib3hDaGFuZ2VIYW5kbGVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlQWN0aXZlU3RhdHVzKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRoaXMuY2hlY2tib3guY2hlY2tlZDtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2hlY2tib3hDaGFuZ2VIYW5kbGVyKGNoYW5nZUV2ZW50OiBFdmVudCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCB0YXJnZXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBjaGFuZ2VFdmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSB0YXJnZXQuY2hlY2tlZDtcblxuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2hhbm5lbENoYW5nZScsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgIHNlY3Rpb25VaWQ6IHRoaXMudWlkLFxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdGhpcy5hY3RpdmUsXG4gICAgICAgICAgICAgICAgYWxsOiBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tib3guZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxufSIsImltcG9ydCBJQ2hhbm5lbEdyb3VwIGZyb20gJy4uL2ludGVyZmFjZXMvSUNoYW5uZWxHcm91cCc7XG5pbXBvcnQgSUNoYW5uZWwgZnJvbSAnLi4vaW50ZXJmYWNlcy9JQ2hhbm5lbCc7XG5pbXBvcnQgQ2hhbm5lbCBmcm9tICcuL0NoYW5uZWwnO1xuaW1wb3J0IEFsbENoYW5uZWwgZnJvbSAnLi9BbGxDaGFubmVsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbm5lbEdyb3VwIGltcGxlbWVudHMgSUNoYW5uZWxHcm91cCB7XG4gICAgcHJpdmF0ZSBjaGFubmVsczogSUNoYW5uZWxbXTtcbiAgICBwcml2YXRlIG5vZGU6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3Iobm9kZTogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgY29uc3QgY2hlY2tib3hlczogTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PiA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgIHRoaXMuY2hhbm5lbHMgPSBBcnJheS5mcm9tKGNoZWNrYm94ZXMpXG4gICAgICAgICAgICAubWFwKChjaGVja2JveDogSFRNTElucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChjaGVja2JveC52YWx1ZSA9PT0gJyonKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQWxsQ2hhbm5lbChjaGVja2JveCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBDaGFubmVsKGNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgLy8gTWV0aG9kIGJpbmRpbmdcbiAgICAgICAgdGhpcy5nZXRBY3RpdmVDaGFubmVscyA9IHRoaXMuZ2V0QWN0aXZlQ2hhbm5lbHMuYmluZCh0aGlzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0Q2hhbm5lbHMoKTogSUNoYW5uZWxbXSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYW5uZWxzO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRBY3RpdmVDaGFubmVscygpOiBJQ2hhbm5lbFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbHMuZmlsdGVyKChjaGFubmVsOiBJQ2hhbm5lbCkgPT4ge1xuICAgICAgICAgICAgY2hhbm5lbC51cGRhdGVBY3RpdmVTdGF0dXMoKTtcbiAgICAgICAgICAgIHJldHVybiBjaGFubmVsLmFjdGl2ZTtcbiAgICAgICAgfSk7XG4gICAgfVxufSIsImltcG9ydCBJRW50cnlUeXBlR3JvdXAgZnJvbSAnLi4vaW50ZXJmYWNlcy9JRW50cnlUeXBlR3JvdXAnO1xuaW1wb3J0IElFbnRyeVR5cGUgZnJvbSAnLi4vaW50ZXJmYWNlcy9JRW50cnlUeXBlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50cnlUeXBlR3JvdXAgaW1wbGVtZW50cyBJRW50cnlUeXBlR3JvdXAge1xuICAgIHByaXZhdGUgZW50cnlUeXBlczogSUVudHJ5VHlwZVtdO1xuICAgIHByaXZhdGUgbm9kZTogSFRNTERpdkVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihlbnRyeVR5cGVzR3JvdXBDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHRoaXMubm9kZSA9IGVudHJ5VHlwZXNHcm91cENvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLm5vZGUuaW5uZXJIVE1MID0gJ0hlbGxvLCB3b3JsZCc7XG4gICAgfVxuXG4gICAgcHVibGljIHNldEVudHJ5VHlwZXMoZW50cnlUeXBlczogSUVudHJ5VHlwZVtdKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZW50cnlUeXBlcyA9IGVudHJ5VHlwZXM7XG4gICAgfVxufSIsIlxudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/ZW1iZWRkZWQhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9maWVsZC5zY3NzXCIpO1xuXG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblxudmFyIHRyYW5zZm9ybTtcbnZhciBpbnNlcnRJbnRvO1xuXG5cblxudmFyIG9wdGlvbnMgPSB7XCJobXJcIjp0cnVlfVxuXG5vcHRpb25zLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVxub3B0aW9ucy5pbnNlcnRJbnRvID0gdW5kZWZpbmVkO1xuXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLi8uLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2xpYi9hZGRTdHlsZXMuanNcIikoY29udGVudCwgb3B0aW9ucyk7XG5cbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXG5pZihtb2R1bGUuaG90KSB7XG5cdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/ZW1iZWRkZWQhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9maWVsZC5zY3NzXCIsIGZ1bmN0aW9uKCkge1xuXHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi4vLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4uLy4uL25vZGVfbW9kdWxlcy9wb3N0Y3NzLWxvYWRlci9zcmMvaW5kZXguanM/P2VtYmVkZGVkIS4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9saWIvbG9hZGVyLmpzIS4vZmllbGQuc2Nzc1wiKTtcblxuXHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXG5cdFx0dmFyIGxvY2FscyA9IChmdW5jdGlvbihhLCBiKSB7XG5cdFx0XHR2YXIga2V5LCBpZHggPSAwO1xuXG5cdFx0XHRmb3Ioa2V5IGluIGEpIHtcblx0XHRcdFx0aWYoIWIgfHwgYVtrZXldICE9PSBiW2tleV0pIHJldHVybiBmYWxzZTtcblx0XHRcdFx0aWR4Kys7XG5cdFx0XHR9XG5cblx0XHRcdGZvcihrZXkgaW4gYikgaWR4LS07XG5cblx0XHRcdHJldHVybiBpZHggPT09IDA7XG5cdFx0fShjb250ZW50LmxvY2FscywgbmV3Q29udGVudC5sb2NhbHMpKTtcblxuXHRcdGlmKCFsb2NhbHMpIHRocm93IG5ldyBFcnJvcignQWJvcnRpbmcgQ1NTIEhNUiBkdWUgdG8gY2hhbmdlZCBjc3MtbW9kdWxlcyBsb2NhbHMuJyk7XG5cblx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdH0pO1xuXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufSJdLCJzb3VyY2VSb290IjoiIn0=