!function(e){function n(n){for(var s,i,c=n[0],l=n[1],a=n[2],d=0,f=[];d<c.length;d++)i=c[d],r[i]&&f.push(r[i][0]),r[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);for(u&&u(n);f.length;)f.shift()();return o.push.apply(o,a||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],s=!0,c=1;c<t.length;c++){var l=t[c];0!==r[l]&&(s=!1)}s&&(o.splice(n--,1),e=i(i.s=t[0]))}return e}var s={},r={main:0},o=[];function i(n){if(s[n])return s[n].exports;var t=s[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=s,i.d=function(e,n,t){i.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,n){if(1&n&&(e=i(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)i.d(t,s,function(n){return e[n]}.bind(null,s));return t},i.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(n,"a",n),n},i.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],l=c.push.bind(c);c.push=n,c=c.slice();for(var a=0;a<c.length;a++)n(c[a]);var u=l;o.push([0,"vendor"]),t()}({"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/postcss-loader/src??embedded!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss ***!
  \********************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,n,t){},"./resources/js/RelatedEntryTypesField.ts":
/*!************************************************!*\
  !*** ./resources/js/RelatedEntryTypesField.ts ***!
  \************************************************/
/*! exports provided: default */function(e,n,t){"use strict";t.r(n);var s=t(/*! ./components/ChannelGroup */"./resources/js/components/ChannelGroup.ts"),r=t(/*! ./components/SectionMap */"./resources/js/components/SectionMap.ts"),o=function(){function e(){var e=this;this.fieldContainer=document.querySelector("#types-unionco-relatedentrytypes-fields-RelatedEntryType-sources-field");var n=document.querySelector("[data-related-entry-types-channels]");if(n){this.channelGroup=new s.default(n);var t=JSON.parse(n.dataset.relatedEntryTypesChannels);this.sectionMap=t}this.fieldContainer.addEventListener("channelChange",function(n){console.log(n.detail);var t=n.detail.channel;console.log(t),console.log(r.default.getEntryTypesBySectionUid(e.sectionMap,t.uid))}),console.log(this)}return e.fetchTemplates=function(e,n){var t={credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},method:"post",body:JSON.stringify({sectionUids:e,entryTypes:n})};return console.log(t),fetch("/admin/related-entry-types/types",t)},e}();n.default=o,new o},"./resources/js/components/Channel.ts":
/*!********************************************!*\
  !*** ./resources/js/components/Channel.ts ***!
  \********************************************/
/*! exports provided: default */function(e,n,t){"use strict";t.r(n);var s=function(){function e(e){this.checkbox=e;var n=e.value.match(/section\:(.*)/);n&&n.length&&(this.uid=n[0]),this.name=this.checkbox.value;var t=document.querySelector('label[for="'+this.checkbox.id+'"]');t&&(this.label=t.innerText),this.checkboxChangeHandler=this.checkboxChangeHandler.bind(this),this.checkbox.addEventListener("change",this.checkboxChangeHandler)}return e.prototype.checkboxChangeHandler=function(e){var n=new CustomEvent("channelChange",{detail:{channel:{name:this.name,label:this.label,uid:this.uid}},bubbles:!0});return this.checkbox.dispatchEvent(n)},e}();n.default=s},"./resources/js/components/ChannelGroup.ts":
/*!*************************************************!*\
  !*** ./resources/js/components/ChannelGroup.ts ***!
  \*************************************************/
/*! exports provided: default */function(e,n,t){"use strict";t.r(n);var s=t(/*! ./Channel */"./resources/js/components/Channel.ts"),r=function(){function e(e){this.node=e;var n=e.querySelectorAll('input[type="checkbox"]');this.channels=Array.from(n).map(function(e){return new s.default(e)}),console.log(this)}return e.prototype.getChannels=function(){return[]},e}();n.default=r},"./resources/js/components/SectionMap.ts":
/*!***********************************************!*\
  !*** ./resources/js/components/SectionMap.ts ***!
  \***********************************************/
/*! exports provided: default */function(e,n,t){"use strict";t.r(n);var s=function(){function e(){}return e.getEntryTypesBySectionUid=function(e,n){for(var t in Object.keys(e)){var s=e[t];if(console.log(s),s){var r=s.filter(function(e){return e.sectionUid===n});if(r&&r.length)return r}}return[]},e}();n.default=s},"./resources/scss/field.scss":
/*!***********************************!*\
  !*** ./resources/scss/field.scss ***!
  \***********************************/
/*! no static exports found */function(e,n,t){var s=t(/*! !../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader!../../node_modules/postcss-loader/src??embedded!../../node_modules/sass-loader/lib/loader.js!./field.scss */"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};t(/*! ../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(s,r);s.locals&&(e.exports=s.locals)},0:
/*!**********************************************************************************!*\
  !*** multi ./resources/js/RelatedEntryTypesField.ts ./resources/scss/field.scss ***!
  \**********************************************************************************/
/*! no static exports found */function(e,n,t){t(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/js/RelatedEntryTypesField.ts */"./resources/js/RelatedEntryTypesField.ts"),e.exports=t(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/scss/field.scss */"./resources/scss/field.scss")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL1JlbGF0ZWRFbnRyeVR5cGVzRmllbGQudHMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvQ2hhbm5lbC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9DaGFubmVsR3JvdXAudHMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvU2VjdGlvbk1hcC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvc2Nzcy9maWVsZC5zY3NzIl0sIm5hbWVzIjpbIndlYnBhY2tKc29ucENhbGxiYWNrIiwiZGF0YSIsIm1vZHVsZUlkIiwiY2h1bmtJZCIsImNodW5rSWRzIiwibW9yZU1vZHVsZXMiLCJleGVjdXRlTW9kdWxlcyIsImkiLCJyZXNvbHZlcyIsImxlbmd0aCIsImluc3RhbGxlZENodW5rcyIsInB1c2giLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJtb2R1bGVzIiwicGFyZW50SnNvbnBGdW5jdGlvbiIsInNoaWZ0IiwiZGVmZXJyZWRNb2R1bGVzIiwiYXBwbHkiLCJjaGVja0RlZmVycmVkTW9kdWxlcyIsInJlc3VsdCIsImRlZmVycmVkTW9kdWxlIiwiZnVsZmlsbGVkIiwiaiIsImRlcElkIiwic3BsaWNlIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsInMiLCJpbnN0YWxsZWRNb2R1bGVzIiwibWFpbiIsImV4cG9ydHMiLCJtb2R1bGUiLCJsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInAiLCJqc29ucEFycmF5Iiwid2luZG93Iiwib2xkSnNvbnBGdW5jdGlvbiIsInNsaWNlIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsIl9jb21wb25lbnRzX0NoYW5uZWxHcm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2NvbXBvbmVudHNfU2VjdGlvbk1hcF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiUmVsYXRlZEVudHJ5VHlwZXNGaWVsZCIsIl90aGlzIiwidGhpcyIsImZpZWxkQ29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2hhbm5lbEdyb3VwQ29udGFpbmVyIiwiY2hhbm5lbEdyb3VwIiwic2VjdGlvbk1hcERhdGEiLCJKU09OIiwicGFyc2UiLCJkYXRhc2V0IiwicmVsYXRlZEVudHJ5VHlwZXNDaGFubmVscyIsInNlY3Rpb25NYXAiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImNvbnNvbGUiLCJsb2ciLCJkZXRhaWwiLCJjaGFubmVsIiwiZ2V0RW50cnlUeXBlc0J5U2VjdGlvblVpZCIsInVpZCIsImZldGNoVGVtcGxhdGVzIiwic2VjdGlvblVpZHMiLCJlbnRyeVR5cGVzIiwib3B0cyIsImNyZWRlbnRpYWxzIiwiaGVhZGVycyIsIlgtUmVxdWVzdGVkLVdpdGgiLCJtZXRob2QiLCJib2R5Iiwic3RyaW5naWZ5IiwiZmV0Y2giLCJDaGFubmVsIiwibm9kZSIsImNoZWNrYm94IiwidWlkTWF0Y2giLCJtYXRjaCIsImxhYmVsIiwiaWQiLCJpbm5lclRleHQiLCJjaGVja2JveENoYW5nZUhhbmRsZXIiLCJjaGFuZ2VFdmVudCIsImV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJidWJibGVzIiwiZGlzcGF0Y2hFdmVudCIsIl9DaGFubmVsX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJDaGFubmVsR3JvdXAiLCJjaGVja2JveGVzIiwicXVlcnlTZWxlY3RvckFsbCIsImNoYW5uZWxzIiwiQXJyYXkiLCJmcm9tIiwibWFwIiwiZ2V0Q2hhbm5lbHMiLCJTZWN0aW9uTWFwIiwiaGFuZGxlIiwia2V5cyIsIm1hdGNoaW5nVWlkIiwiZmlsdGVyIiwiZW50cnlUeXBlIiwic2VjdGlvblVpZCIsImNvbnRlbnQiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsInVuZGVmaW5lZCIsImxvY2FscyJdLCJtYXBwaW5ncyI6ImFBQ0EsU0FBQUEsRUFBQUMsR0FRQSxJQVBBLElBTUFDLEVBQUFDLEVBTkFDLEVBQUFILEVBQUEsR0FDQUksRUFBQUosRUFBQSxHQUNBSyxFQUFBTCxFQUFBLEdBSUFNLEVBQUEsRUFBQUMsRUFBQSxHQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJKLEVBQUFDLEVBQUFHLEdBQ0FHLEVBQUFQLElBQ0FLLEVBQUFHLEtBQUFELEVBQUFQLEdBQUEsSUFFQU8sRUFBQVAsR0FBQSxFQUVBLElBQUFELEtBQUFHLEVBQ0FPLE9BQUFDLFVBQUFDLGVBQUFDLEtBQUFWLEVBQUFILEtBQ0FjLEVBQUFkLEdBQUFHLEVBQUFILElBS0EsSUFGQWUsS0FBQWhCLEdBRUFPLEVBQUFDLFFBQ0FELEVBQUFVLE9BQUFWLEdBT0EsT0FIQVcsRUFBQVIsS0FBQVMsTUFBQUQsRUFBQWIsR0FBQSxJQUdBZSxJQUVBLFNBQUFBLElBRUEsSUFEQSxJQUFBQyxFQUNBZixFQUFBLEVBQWlCQSxFQUFBWSxFQUFBVixPQUE0QkYsSUFBQSxDQUc3QyxJQUZBLElBQUFnQixFQUFBSixFQUFBWixHQUNBaUIsR0FBQSxFQUNBQyxFQUFBLEVBQWtCQSxFQUFBRixFQUFBZCxPQUEyQmdCLElBQUEsQ0FDN0MsSUFBQUMsRUFBQUgsRUFBQUUsR0FDQSxJQUFBZixFQUFBZ0IsS0FBQUYsR0FBQSxHQUVBQSxJQUNBTCxFQUFBUSxPQUFBcEIsSUFBQSxHQUNBZSxFQUFBTSxJQUFBQyxFQUFBTixFQUFBLEtBR0EsT0FBQUQsRUFJQSxJQUFBUSxFQUFBLEdBS0FwQixFQUFBLENBQ0FxQixLQUFBLEdBR0FaLEVBQUEsR0FHQSxTQUFBUyxFQUFB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QkFDdkVoRCxLQUFLaUQsU0FBV0MsTUFBTUMsS0FBS0osR0FBWUssSUFBSSxTQUFDbkIsR0FBK0IsV0FBSVksRUFBQSxRQUFRWixLQUN2Rm5CLFFBQVFDLElBQUlmLE1BTXBCLE9BSFc4QyxFQUFBckcsVUFBQTRHLFlBQVAsV0FDSSxNQUFPLElBRWZQLEVBZEE7Ozs7NkRDREF0RixFQUFBZ0IsRUFBQW1CLEdBQUEsSUFBQTJELEVBQUEsb0JBQUFBLEtBaUJBLE9BZGtCQSxFQUFBcEMsMEJBQWQsU0FBd0NQLEVBQXlCUSxHQUM3RCxJQUFLLElBQU1vQyxLQUFVL0csT0FBT2dILEtBQUs3QyxHQUFhLENBQzFDLElBQU1XLEVBQTJCWCxFQUFXNEMsR0FFNUMsR0FEQXpDLFFBQVFDLElBQUlPLEdBQ1JBLEVBQVksQ0FDWixJQUFNbUMsRUFBNEJuQyxFQUFXb0MsT0FBTyxTQUFDQyxHQUEwQixPQUFBQSxFQUFVQyxhQUFlekMsSUFDeEcsR0FBSXNDLEdBQWVBLEVBQVlwSCxPQUMzQixPQUFPb0gsR0FLbkIsTUFBTyxJQUVmSCxFQWpCQTs7Ozs4Q0NGQSxJQUFBTyxFQUFjckcsMk1BQVEsNk1BRXRCLGlCQUFBcUcsTUFBQSxFQUE0Q2hHLEVBQUExQixFQUFTMEgsRUFBQSxNQU9yRCxJQUFBQyxFQUFBLENBQWVDLEtBQUEsRUFFZkMsZUFQQUEsRUFRQUMsZ0JBQUFDLEdBRWExRyx5REFBUSwrQ0FBUkEsQ0FBMkRxRyxFQUFBQyxHQUV4RUQsRUFBQU0sU0FBQXRHLEVBQUFELFFBQUFpRyxFQUFBTSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4gXHRmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhkYXRhKSB7XG4gXHRcdHZhciBjaHVua0lkcyA9IGRhdGFbMF07XG4gXHRcdHZhciBtb3JlTW9kdWxlcyA9IGRhdGFbMV07XG4gXHRcdHZhciBleGVjdXRlTW9kdWxlcyA9IGRhdGFbMl07XG5cbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCByZXNvbHZlcyA9IFtdO1xuIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuIFx0XHRcdGNodW5rSWQgPSBjaHVua0lkc1tpXTtcbiBcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pIHtcbiBcdFx0XHRcdHJlc29sdmVzLnB1c2goaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdWzBdKTtcbiBcdFx0XHR9XG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gMDtcbiBcdFx0fVxuIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbiBcdFx0XHRpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9yZU1vZHVsZXMsIG1vZHVsZUlkKSkge1xuIFx0XHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdFx0fVxuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oZGF0YSk7XG5cbiBcdFx0d2hpbGUocmVzb2x2ZXMubGVuZ3RoKSB7XG4gXHRcdFx0cmVzb2x2ZXMuc2hpZnQoKSgpO1xuIFx0XHR9XG5cbiBcdFx0Ly8gYWRkIGVudHJ5IG1vZHVsZXMgZnJvbSBsb2FkZWQgY2h1bmsgdG8gZGVmZXJyZWQgbGlzdFxuIFx0XHRkZWZlcnJlZE1vZHVsZXMucHVzaC5hcHBseShkZWZlcnJlZE1vZHVsZXMsIGV4ZWN1dGVNb2R1bGVzIHx8IFtdKTtcblxuIFx0XHQvLyBydW4gZGVmZXJyZWQgbW9kdWxlcyB3aGVuIGFsbCBjaHVua3MgcmVhZHlcbiBcdFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4gXHR9O1xuIFx0ZnVuY3Rpb24gY2hlY2tEZWZlcnJlZE1vZHVsZXMoKSB7XG4gXHRcdHZhciByZXN1bHQ7XG4gXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBkZWZlcnJlZE1vZHVsZXMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHR2YXIgZGVmZXJyZWRNb2R1bGUgPSBkZWZlcnJlZE1vZHVsZXNbaV07XG4gXHRcdFx0dmFyIGZ1bGZpbGxlZCA9IHRydWU7XG4gXHRcdFx0Zm9yKHZhciBqID0gMTsgaiA8IGRlZmVycmVkTW9kdWxlLmxlbmd0aDsgaisrKSB7XG4gXHRcdFx0XHR2YXIgZGVwSWQgPSBkZWZlcnJlZE1vZHVsZVtqXTtcbiBcdFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tkZXBJZF0gIT09IDApIGZ1bGZpbGxlZCA9IGZhbHNlO1xuIFx0XHRcdH1cbiBcdFx0XHRpZihmdWxmaWxsZWQpIHtcbiBcdFx0XHRcdGRlZmVycmVkTW9kdWxlcy5zcGxpY2UoaS0tLCAxKTtcbiBcdFx0XHRcdHJlc3VsdCA9IF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gZGVmZXJyZWRNb2R1bGVbMF0pO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRyZXR1cm4gcmVzdWx0O1xuIFx0fVxuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gdW5kZWZpbmVkID0gY2h1bmsgbm90IGxvYWRlZCwgbnVsbCA9IGNodW5rIHByZWxvYWRlZC9wcmVmZXRjaGVkXG4gXHQvLyBQcm9taXNlID0gY2h1bmsgbG9hZGluZywgMCA9IGNodW5rIGxvYWRlZFxuIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbiBcdFx0XCJtYWluXCI6IDBcbiBcdH07XG5cbiBcdHZhciBkZWZlcnJlZE1vZHVsZXMgPSBbXTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuIFx0dmFyIGpzb25wQXJyYXkgPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gfHwgW107XG4gXHR2YXIgb2xkSnNvbnBGdW5jdGlvbiA9IGpzb25wQXJyYXkucHVzaC5iaW5kKGpzb25wQXJyYXkpO1xuIFx0anNvbnBBcnJheS5wdXNoID0gd2VicGFja0pzb25wQ2FsbGJhY2s7XG4gXHRqc29ucEFycmF5ID0ganNvbnBBcnJheS5zbGljZSgpO1xuIFx0Zm9yKHZhciBpID0gMDsgaSA8IGpzb25wQXJyYXkubGVuZ3RoOyBpKyspIHdlYnBhY2tKc29ucENhbGxiYWNrKGpzb25wQXJyYXlbaV0pO1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSBvbGRKc29ucEZ1bmN0aW9uO1xuXG5cbiBcdC8vIGFkZCBlbnRyeSBtb2R1bGUgdG8gZGVmZXJyZWQgbGlzdFxuIFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2goWzAsXCJ2ZW5kb3JcIl0pO1xuIFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiByZWFkeVxuIFx0cmV0dXJuIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCk7XG4iLCJpbXBvcnQgSUNoYW5uZWxHcm91cCBmcm9tICcuL2ludGVyZmFjZXMvSUNoYW5uZWxHcm91cCc7XG5pbXBvcnQgQ2hhbm5lbEdyb3VwIGZyb20gJy4vY29tcG9uZW50cy9DaGFubmVsR3JvdXAnO1xuaW1wb3J0IElTZWN0aW9uTWFwIGZyb20gJy4vaW50ZXJmYWNlcy9JU2VjdGlvbk1hcCc7XG5pbXBvcnQgSUNoYW5uZWwgZnJvbSAnLi9pbnRlcmZhY2VzL0lDaGFubmVsJztcbmltcG9ydCBTZWN0aW9uTWFwIGZyb20gJy4vY29tcG9uZW50cy9TZWN0aW9uTWFwJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVsYXRlZEVudHJ5VHlwZXNGaWVsZCB7XG4gICAgcHVibGljIGNoYW5uZWxHcm91cDogSUNoYW5uZWxHcm91cDtcbiAgICBwdWJsaWMgZmllbGRDb250YWluZXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIC8vIHB1YmxpYyBlbnRyeVR5cGVHcm91cDogSUVudHJ5VHlwZUdyb3VwO1xuICAgIHByaXZhdGUgc2VjdGlvbk1hcDogSVNlY3Rpb25NYXA7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5maWVsZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0eXBlcy11bmlvbmNvLXJlbGF0ZWRlbnRyeXR5cGVzLWZpZWxkcy1SZWxhdGVkRW50cnlUeXBlLXNvdXJjZXMtZmllbGQnKTtcblxuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBjaGFubmVscyBzZWxlY3QgYXJlYVxuICAgICAgICBjb25zdCBjaGFubmVsR3JvdXBDb250YWluZXI6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtcmVsYXRlZC1lbnRyeS10eXBlcy1jaGFubmVsc10nKTtcbiAgICAgICAgaWYgKGNoYW5uZWxHcm91cENvbnRhaW5lcikge1xuICAgICAgICAgICAgdGhpcy5jaGFubmVsR3JvdXAgPSBuZXcgQ2hhbm5lbEdyb3VwKGNoYW5uZWxHcm91cENvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25NYXBEYXRhOiBJU2VjdGlvbk1hcCA9IEpTT04ucGFyc2UoY2hhbm5lbEdyb3VwQ29udGFpbmVyLmRhdGFzZXQucmVsYXRlZEVudHJ5VHlwZXNDaGFubmVscyk7XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25NYXAgPSBzZWN0aW9uTWFwRGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNvbnN0IGVudHJ5VHlwZUdyb3VwQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCA9IHRoaXMuZmllbGRDb250YWluZXIucXVlcnlTZWxlY3RvcignW2RhdGEtZW50cnktdHlwZXMtc2VsZWN0LWFyZWFdJyk7XG4gICAgICAgIC8vIGlmIChlbnRyeVR5cGVzR3JvdXBDb250YWluZXIpIHtcbiAgICAgICAgLy8gICAgIHRoaXMuZW50eVR5cGVHcm91cCA9IG5ldyBFbnR5VHlwZUdyb3VwXG4gICAgICAgIC8vIH1cblxuICAgICAgICAvLyBFdmVudCBMaXN0ZW5lcnNcbiAgICAgICAgdGhpcy5maWVsZENvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjaGFubmVsQ2hhbmdlJywgKGU6IEN1c3RvbUV2ZW50KSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlLmRldGFpbCk7XG4gICAgICAgICAgICBjb25zdCB7IGNoYW5uZWwgfTogSUNoYW5uZWwgPSBlLmRldGFpbDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYW5uZWwpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coU2VjdGlvbk1hcC5nZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkKHRoaXMuc2VjdGlvbk1hcCwgY2hhbm5lbC51aWQpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2codGhpcyk7XG5cbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGZldGNoVGVtcGxhdGVzKHNlY3Rpb25VaWRzOiBzdHJpbmdbXSwgZW50cnlUeXBlczogc3RyaW5nW10pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IG9wdHM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIFwic2VjdGlvblVpZHNcIjogc2VjdGlvblVpZHMsXG4gICAgICAgICAgICAgICAgXCJlbnRyeVR5cGVzXCI6IGVudHJ5VHlwZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKG9wdHMpO1xuICAgICAgICByZXR1cm4gZmV0Y2goJy9hZG1pbi9yZWxhdGVkLWVudHJ5LXR5cGVzL3R5cGVzJywgb3B0cyk7XG4gICAgICAgIC8vIC50aGVuKHJlc3AgPT56IHJlc3AudGV4dCgpKVxuICAgICAgICAvLyAudGhlbihkYXRhID0+IHJlc29sdmUoZGF0YSkpO1xuICAgIH1cbn1cblxubmV3IFJlbGF0ZWRFbnRyeVR5cGVzRmllbGQoKTtcblxuLy8gY29uc3QgYWpheE9wdHMgPSB7XG4vLyAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsXG4vLyAgICAgaGVhZGVyczoge1xuLy8gICAgICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCcsXG4vLyAgICAgfVxuLy8gfTtcblxuLy8gY2xhc3MgRW50cnlUeXBlIHtcbi8vICAgICBjb25zdHJ1Y3RvcigpIHtcbi8vICAgICAgICAgdGhpcy5maWVsZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0eXBlcy11bmlvbmNvLXJlbGF0ZWRlbnRyeXR5cGVzLWZpZWxkcy1FbnRyeVR5cGUtc291cmNlcy1maWVsZCcpO1xuLy8gICAgICAgICBpZiAodGhpcy5maWVsZENvbnRhaW5lcikge1xuLy8gICAgICAgICAgICAgdGhpcy5zZWN0aW9uQ2hlY2tib3hlcyA9IHRoaXMuZmllbGRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25DaGVja2JveGVzKTtcbi8vICAgICAgICAgICAgIGlmICh0aGlzLnNlY3Rpb25DaGVja2JveGVzKSB7XG4vLyAgICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uQ2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuaGFuZGxlU291cmNlc0NoYW5nZS5iaW5kKHRoaXMpKSk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICB0aGlzLmVudHJ5VHlwZXNTZWxlY3RBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZW50cnktdHlwZXMtc2VsZWN0LWFyZWFdJyk7XG4vLyAgICAgICAgIHRoaXMuZ2V0U2VsZWN0ZWRTZWN0aW9ucyA9IHRoaXMuZ2V0U2VsZWN0ZWRTZWN0aW9ucy5iaW5kKHRoaXMpO1xuLy8gICAgIH1cblxuLy8gICAgIGdldFNlbGVjdGVkU2VjdGlvbnMoKSB7XG4vLyAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5zZWN0aW9uQ2hlY2tib3hlcywgY2hlY2tib3ggPT4ge1xuLy8gICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjaGVja2JveCk7XG4vLyAgICAgICAgICAgICByZXR1cm4gY2hlY2tib3guY2hlY2tlZCB8fCBmYWxzZTtcbi8vICAgICAgICAgfSkubWFwKGNoZWNrYm94ID0+IHtcbi8vICAgICAgICAgICAgIHJldHVybiBjaGVja2JveC52YWx1ZTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuXG4vLyAgICAgZ2V0U2VsZWN0ZWRFbnRyeVR5cGVzKCkge1xuLy8gICAgICAgICBjb25zdCBlbnRyeVR5cGVzU2VjdGlvbiA9IHRoaXMuZW50cnlUeXBlc1NlbGVjdEFyZWEucXVlcnlTZWxlY3RvcignZGl2Jyk7XG4vLyAgICAgICAgIGlmIChlbnRyeVR5cGVzU2VjdGlvbikge1xuLy8gICAgICAgICAgICAgY29uc3QgZW50cnlUeXBlQ2hlY2tib3hlcyA9IGVudHJ5VHlwZXNTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuLy8gICAgICAgICAgICAgY29uc29sZS5sb2coZW50cnlUeXBlQ2hlY2tib3hlcyk7XG4vLyAgICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGVudHJ5VHlwZUNoZWNrYm94ZXMsIGNoZWNrYm94ID0+IHtcbi8vICAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tib3guY2hlY2tlZDtcbi8vICAgICAgICAgICAgIH0pLm1hcChjaGVja2JveCA9PiB7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrYm94LnZhbHVlO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICByZXR1cm4gbnVsbDtcbi8vICAgICB9XG5cbi8vICAgICBoYW5kbGVTb3VyY2VzQ2hhbmdlKGUpIHtcbi8vICAgICAgICAgY29uc3Qgc2VsZWN0ZWRTZWN0aW9ucyA9IHRoaXMuZ2V0U2VsZWN0ZWRTZWN0aW9ucygpO1xuLy8gICAgICAgICBjb25zdCBzZWxlY3RlZEVudHJ5VHlwZXMgPSB0aGlzLmdldFNlbGVjdGVkRW50cnlUeXBlcygpO1xuXG4vLyAgICAgICAgIGlmIChzZWxlY3RlZFNlY3Rpb25zLmxlbmd0aCA8IDEpIHtcbi8vICAgICAgICAgICAgIHRoaXMuZW50cnlUeXBlc1NlbGVjdEFyZWEuaW5uZXJIVE1MID0gJyc7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgQXBpQ2xpZW50LmdldFRlbXBsYXRlKHNlbGVjdGVkU2VjdGlvbnMsIHNlbGVjdGVkRW50cnlUeXBlcylcbi8vICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuLy8gICAgICAgICAgICAgICAgIHRoaXMuZW50cnlUeXBlc1NlbGVjdEFyZWEuaW5uZXJIVE1MID0gZGF0YTtcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgIH1cbi8vIH1cblxuLy8gY2xhc3MgQXBpQ2xpZW50IHtcbi8vICAgICBzdGF0aWMgZ2V0VGVtcGxhdGUoc2VjdGlvblVpZHMsIGVudHJ5VHlwZXMpIHtcbi8vICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbi8vICAgICAgICAgICAgIGxldCBvcHRzID0ge1xuLy8gICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLFxuLy8gICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbi8vICAgICAgICAgICAgICAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLFxuLy8gICAgICAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4vLyAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuLy8gICAgICAgICAgICAgICAgICAgICBcInNlY3Rpb25VaWRzXCI6IHNlY3Rpb25VaWRzLFxuLy8gICAgICAgICAgICAgICAgICAgICBcImVudHJ5VHlwZXNcIjogZW50cnlUeXBlc1xuLy8gICAgICAgICAgICAgICAgIH0pXG4vLyAgICAgICAgICAgICB9O1xuLy8gICAgICAgICAgICAgY29uc29sZS5sb2cob3B0cyk7XG4vLyAgICAgICAgICAgICBmZXRjaCgnL2FkbWluL3JlbGF0ZWQtZW50cnktdHlwZXMvdHlwZXMnLCBvcHRzKVxuLy8gICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gcmVzcC50ZXh0KCkpXG4vLyAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiByZXNvbHZlKGRhdGEpKTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuLy8gfVxuXG4vLyAoZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuXG4vLyAgICAgdmFyIHBsdWdpbk5hbWUgPSBcIlJlbGF0ZWRFbnRyeVR5cGVzXCIsXG4vLyAgICAgICAgIGRlZmF1bHRzID0ge307XG5cbi8vICAgICAvLyBQbHVnaW4gY29uc3RydWN0b3Jcbi8vICAgICBmdW5jdGlvbiBQbHVnaW4oZWxlbWVudCwgb3B0aW9ucykge1xuLy8gICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXG4vLyAgICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbi8vICAgICAgICAgdGhpcy5fZGVmYXVsdHMgPSBkZWZhdWx0cztcbi8vICAgICAgICAgdGhpcy5fbmFtZSA9IHBsdWdpbk5hbWU7XG5cbi8vICAgICAgICAgdGhpcy5pbml0KCk7XG4vLyAgICAgfVxuXG4vLyAgICAgUGx1Z2luLnByb3RvdHlwZSA9IHtcblxuLy8gICAgICAgICBpbml0OiBmdW5jdGlvbiAoaWQpIHtcbi8vICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbi8vICAgICAgICAgICAgICQoZnVuY3Rpb24gKCkge1xuXG4vLyAgICAgICAgICAgICAgICAgLyogLS0gX3RoaXMub3B0aW9ucyBnaXZlcyB1cyBhY2Nlc3MgdG8gdGhlICRqc29uVmFycyB0aGF0IG91ciBGaWVsZFR5cGUgcGFzc2VkIGRvd24gdG8gdXMgKi9cblxuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9O1xuXG4vLyAgICAgLy8gQSByZWFsbHkgbGlnaHR3ZWlnaHQgcGx1Z2luIHdyYXBwZXIgYXJvdW5kIHRoZSBjb25zdHJ1Y3Rvcixcbi8vICAgICAvLyBwcmV2ZW50aW5nIGFnYWluc3QgbXVsdGlwbGUgaW5zdGFudGlhdGlvbnNcbi8vICAgICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbi8vICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICAgICBpZiAoISQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUpKSB7XG4vLyAgICAgICAgICAgICAgICAgJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSxcbi8vICAgICAgICAgICAgICAgICAgICAgbmV3IFBsdWdpbih0aGlzLCBvcHRpb25zKSk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH07XG5cbi8vIH0pKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG5cbi8vIHdpbmRvdy5SZWxhdGVkRW50cnlUeXBlc0ZpZWxkID0gUmVsYXRlZEVudHJ5VHlwZXNGaWVsZDsiLCJpbXBvcnQgSUNoYW5uZWwgZnJvbSBcIi4uL2ludGVyZmFjZXMvSUNoYW5uZWxcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbm5lbCBpbXBsZW1lbnRzIElDaGFubmVsIHtcbiAgICBwcml2YXRlIGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50O1xuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gICAgcHVibGljIGxhYmVsOiBzdHJpbmc7XG4gICAgcHVibGljIHVpZDogc3RyaW5nO1xuXG4gICAgY29uc3RydWN0b3Iobm9kZTogSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICB0aGlzLmNoZWNrYm94ID0gbm9kZTtcbiAgICAgICAgY29uc3QgdWlkTWF0Y2ggPSBub2RlLnZhbHVlLm1hdGNoKC9zZWN0aW9uXFw6KC4qKS8pO1xuICAgICAgICBcbiAgICAgICAgaWYgKHVpZE1hdGNoICYmIHVpZE1hdGNoLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy51aWQgPSB1aWRNYXRjaFswXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm5hbWUgPSB0aGlzLmNoZWNrYm94LnZhbHVlO1xuICAgICAgICBjb25zdCBsYWJlbDogSFRNTExhYmVsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGxhYmVsW2Zvcj1cIiR7dGhpcy5jaGVja2JveC5pZH1cIl1gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsLmlubmVyVGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2hlY2tib3hDaGFuZ2VIYW5kbGVyID0gdGhpcy5jaGVja2JveENoYW5nZUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5jaGVja2JveC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLmNoZWNrYm94Q2hhbmdlSGFuZGxlcik7XG4gICAgfVxuXG4gICAgY2hlY2tib3hDaGFuZ2VIYW5kbGVyKGNoYW5nZUV2ZW50OiBFdmVudCk6IGJvb2xlYW4ge1xuICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnY2hhbm5lbENoYW5nZScsIHtcbiAgICAgICAgICAgIGRldGFpbDoge1xuICAgICAgICAgICAgICAgIGNoYW5uZWw6IHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogdGhpcy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogdGhpcy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgdWlkOiB0aGlzLnVpZFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmNoZWNrYm94LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgIH1cbn0iLCJpbXBvcnQgSUNoYW5uZWxHcm91cCBmcm9tICcuLi9pbnRlcmZhY2VzL0lDaGFubmVsR3JvdXAnO1xuaW1wb3J0IElDaGFubmVsIGZyb20gJy4uL2ludGVyZmFjZXMvSUNoYW5uZWwnO1xuaW1wb3J0IENoYW5uZWwgZnJvbSAnLi9DaGFubmVsJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2hhbm5lbEdyb3VwIGltcGxlbWVudHMgSUNoYW5uZWxHcm91cCB7XG4gICAgcHJpdmF0ZSBjaGFubmVsczogSUNoYW5uZWxbXTtcbiAgICBwcml2YXRlIG5vZGU6IEhUTUxEaXZFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3Iobm9kZTogSFRNTERpdkVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5ub2RlID0gbm9kZTtcbiAgICAgICAgY29uc3QgY2hlY2tib3hlczogTm9kZUxpc3RPZjxIVE1MSW5wdXRFbGVtZW50PiA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4gICAgICAgIHRoaXMuY2hhbm5lbHMgPSBBcnJheS5mcm9tKGNoZWNrYm94ZXMpLm1hcCgoY2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQpID0+IG5ldyBDaGFubmVsKGNoZWNrYm94KSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDaGFubmVscygpOiBJQ2hhbm5lbFtdIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbn0iLCJpbXBvcnQgSVNlY3Rpb25NYXAgZnJvbSBcIi4uL2ludGVyZmFjZXMvSVNlY3Rpb25NYXBcIjtcbmltcG9ydCBJRW50cnlUeXBlIGZyb20gJy4uL2ludGVyZmFjZXMvSUVudHJ5VHlwZSc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb25NYXAgaW1wbGVtZW50cyBJU2VjdGlvbk1hcCB7XG4gICAgW3NlY3Rpb25IYW5kbGU6IHN0cmluZ106IElFbnRyeVR5cGVbXTtcblxuICAgIHB1YmxpYyBzdGF0aWMgZ2V0RW50cnlUeXBlc0J5U2VjdGlvblVpZChzZWN0aW9uTWFwOiBJU2VjdGlvbk1hcCwgdWlkOiBzdHJpbmcpOiBJRW50cnlUeXBlW10ge1xuICAgICAgICBmb3IgKGNvbnN0IGhhbmRsZSBpbiBPYmplY3Qua2V5cyhzZWN0aW9uTWFwKSkge1xuICAgICAgICAgICAgY29uc3QgZW50cnlUeXBlczogSUVudHJ5VHlwZVtdID0gc2VjdGlvbk1hcFtoYW5kbGVdO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZW50cnlUeXBlcyk7XG4gICAgICAgICAgICBpZiAoZW50cnlUeXBlcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG1hdGNoaW5nVWlkOiBJRW50cnlUeXBlW10gPSBlbnRyeVR5cGVzLmZpbHRlcigoZW50cnlUeXBlOiBJRW50cnlUeXBlKSA9PiBlbnRyeVR5cGUuc2VjdGlvblVpZCA9PT0gdWlkKTtcbiAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdVaWQgJiYgbWF0Y2hpbmdVaWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaGluZ1VpZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG59IiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9lbWJlZGRlZCEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL2ZpZWxkLnNjc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9lbWJlZGRlZCEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL2ZpZWxkLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/ZW1iZWRkZWQhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9maWVsZC5zY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==