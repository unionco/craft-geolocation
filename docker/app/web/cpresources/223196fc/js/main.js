!function(e){function t(t){for(var s,i,c=t[0],a=t[1],u=t[2],h=0,p=[];h<c.length;h++)i=c[h],r[i]&&p.push(r[i][0]),r[i]=0;for(s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s]);for(l&&l(t);p.length;)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],s=!0,c=1;c<n.length;c++){var a=n[c];0!==r[a]&&(s=!1)}s&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var s={},r={main:0},o=[];function i(t){if(s[t])return s[t].exports;var n=s[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=s,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window.webpackJsonp=window.webpackJsonp||[],a=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var l=a;o.push([0,"vendor"]),n()}({"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss":
/*!********************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader!./node_modules/postcss-loader/src??embedded!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss ***!
  \********************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,n){},"./resources/js/RelatedEntryTypesField.ts":
/*!************************************************!*\
  !*** ./resources/js/RelatedEntryTypesField.ts ***!
  \************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=n(/*! ./components/ChannelGroup */"./resources/js/components/ChannelGroup.ts"),r=n(/*! ./components/SectionMap */"./resources/js/components/SectionMap.ts"),o=n(/*! ./components/EntryTypeGroup */"./resources/js/components/EntryTypeGroup.ts"),i=function(){function e(){var e=this;this.activeSections=[],this.fieldContainer=document.querySelector("#types-unionco-relatedentrytypes-fields-RelatedEntryType-sources-field");var t=document.querySelector("[data-related-entry-types-channels]");if(t){this.channelGroup=new s.default(t),this.activeSections=this.channelGroup.getActiveChannels();var n=JSON.parse(t.dataset.relatedEntryTypesChannels);this.sectionMap=new r.default(n.sections,n.entryTypes)}var i=document.querySelector("[data-entry-types-select-area]");console.log(i),console.log(this.sectionMap),i&&(this.entryTypeGroup=new o.default(i),this.entryTypeGroup.setEntryTypes(this.sectionMap.getEntryTypesByChannelArray(this.activeSections)),this.entryTypeGroup.render()),this.updateActiveSections=this.updateActiveSections.bind(this),this.fieldContainer.addEventListener("channelChange",function(t){var n=t.detail,s=n.all,r=n.active;console.log(n),e.updateActiveSections(s,r)}),console.log(this)}return e.prototype.updateActiveSections=function(e,t){this.activeSections=e?t?this.channelGroup.getChannels():[]:this.channelGroup.getActiveChannels();var n=this.sectionMap.getEntryTypesByChannelArray(this.activeSections);console.log(n),this.entryTypeGroup.setEntryTypes(n),this.entryTypeGroup.render(),console.log(this.activeSections)},e.fetchTemplates=function(e,t){var n={credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest"},method:"post",body:JSON.stringify({sectionUids:e,entryTypes:t})};return console.log(n),fetch("/admin/related-entry-types/types",n)},e}();t.default=i,new i},"./resources/js/components/AllChannel.ts":
/*!***********************************************!*\
  !*** ./resources/js/components/AllChannel.ts ***!
  \***********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s,r=n(/*! ./Channel */"./resources/js/components/Channel.ts"),o=(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.checkboxChangeHandler=function(e){var t=e.target;this.active=t.checked;var n=new CustomEvent("channelChange",{detail:{sectionUid:this.uid,active:this.active,all:!0},bubbles:!0});return this.checkbox.dispatchEvent(n)},t}(r.default);t.default=i},"./resources/js/components/Channel.ts":
/*!********************************************!*\
  !*** ./resources/js/components/Channel.ts ***!
  \********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e){this.checkbox=e,this.active=e.checked;var t=e.value.match(/section:(.*)/);t&&t.length&&(this.uid=t[1]),this.name=e.value;var n=document.querySelector('label[for="'+this.checkbox.id+'"]');n&&(this.label=n.innerText),this.checkboxChangeHandler=this.checkboxChangeHandler.bind(this),this.updateActiveStatus=this.updateActiveStatus.bind(this),this.checkbox.addEventListener("change",this.checkboxChangeHandler)}return e.prototype.updateActiveStatus=function(){this.active=this.checkbox.checked},e.prototype.checkboxChangeHandler=function(e){var t=e.target;this.active=t.checked;var n=new CustomEvent("channelChange",{detail:{sectionUid:this.uid,active:this.active,all:!1},bubbles:!0});return this.checkbox.dispatchEvent(n)},e}();t.default=s},"./resources/js/components/ChannelGroup.ts":
/*!*************************************************!*\
  !*** ./resources/js/components/ChannelGroup.ts ***!
  \*************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=n(/*! ./Channel */"./resources/js/components/Channel.ts"),r=n(/*! ./AllChannel */"./resources/js/components/AllChannel.ts"),o=function(){function e(e){this.node=e;var t=e.querySelectorAll('input[type="checkbox"]');this.channels=Array.from(t).map(function(e){return"*"===e.value?new r.default(e):new s.default(e)}),this.getActiveChannels=this.getActiveChannels.bind(this),this.getChannels=this.getChannels.bind(this)}return e.prototype.getChannels=function(){return this.channels},e.prototype.getActiveChannels=function(){var e=this.channels.filter(function(e){return e.updateActiveStatus(),e.active});return console.log("getActiveChannels",e),e},e}();t.default=o},"./resources/js/components/EntryTypeGroup.ts":
/*!***************************************************!*\
  !*** ./resources/js/components/EntryTypeGroup.ts ***!
  \***************************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e){this.node=e}return e.prototype.render=function(){var e=this.entryTypes.map(function(e){return e.toHtml()});console.log(e),this.node.innerHTML="<h1>EntryTypes</h1><ul>\n            "+e+"\n        </ul>",console.log(this)},e.prototype.setEntryTypes=function(e){this.entryTypes=e},e}();t.default=s},"./resources/js/components/SectionMap.ts":
/*!***********************************************!*\
  !*** ./resources/js/components/SectionMap.ts ***!
  \***********************************************/
/*! exports provided: default */function(e,t,n){"use strict";n.r(t);var s=function(){function e(e,t){this.sections=e,this.entryTypes=t,this.getEntryTypesBySectionUid=this.getEntryTypesBySectionUid.bind(this),this.getEntryTypesBySectionUidArray=this.getEntryTypesBySectionUidArray.bind(this),this.getEntryTypesByChannelArray=this.getEntryTypesByChannelArray.bind(this)}return e.prototype.getEntryTypesBySectionUid=function(e){var t=this.entryTypes.filter(function(t){return console.log(t.sectionUid,e),t.sectionUid===e});return t&&t.length?t:[]},e.prototype.getEntryTypesBySectionUidArray=function(e){var t=this,n=[];return e.forEach(function(e){t.getEntryTypesBySectionUid(e).forEach(function(e){console.log(e),n.push(e)})}),n},e.prototype.getEntryTypesByChannelArray=function(e){var t=e.map(function(e){return e.uid});return this.getEntryTypesBySectionUidArray(t)},e}();t.default=s},"./resources/scss/field.scss":
/*!***********************************!*\
  !*** ./resources/scss/field.scss ***!
  \***********************************/
/*! no static exports found */function(e,t,n){var s=n(/*! !../../node_modules/mini-css-extract-plugin/dist/loader.js!../../node_modules/css-loader!../../node_modules/postcss-loader/src??embedded!../../node_modules/sass-loader/lib/loader.js!./field.scss */"./node_modules/mini-css-extract-plugin/dist/loader.js!./node_modules/css-loader/index.js!./node_modules/postcss-loader/src/index.js?!./node_modules/sass-loader/lib/loader.js!./resources/scss/field.scss");"string"==typeof s&&(s=[[e.i,s,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(/*! ../../node_modules/style-loader/lib/addStyles.js */"./node_modules/style-loader/lib/addStyles.js")(s,r);s.locals&&(e.exports=s.locals)},0:
/*!**********************************************************************************!*\
  !*** multi ./resources/js/RelatedEntryTypesField.ts ./resources/scss/field.scss ***!
  \**********************************************************************************/
/*! no static exports found */function(e,t,n){n(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/js/RelatedEntryTypesField.ts */"./resources/js/RelatedEntryTypesField.ts"),e.exports=n(/*! /Users/abryrath/Union/Library/relatedentrytypes/resources/scss/field.scss */"./resources/scss/field.scss")}});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL1JlbGF0ZWRFbnRyeVR5cGVzRmllbGQudHMiLCJ3ZWJwYWNrOi8vLy4vcmVzb3VyY2VzL2pzL2NvbXBvbmVudHMvQWxsQ2hhbm5lbC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9DaGFubmVsLnRzIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9qcy9jb21wb25lbnRzL0NoYW5uZWxHcm91cC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9FbnRyeVR5cGVHcm91cC50cyIsIndlYnBhY2s6Ly8vLi9yZXNvdXJjZXMvanMvY29tcG9uZW50cy9TZWN0aW9uTWFwLnRzIiwid2VicGFjazovLy8uL3Jlc291cmNlcy9zY3NzL2ZpZWxkLnNjc3MiXSwibmFtZXMiOlsid2VicGFja0pzb25wQ2FsbGJhY2siLCJkYXRhIiwibW9kdWxlSWQiLCJjaHVua0lkIiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImV4ZWN1dGVNb2R1bGVzIiwiaSIsInJlc29sdmVzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZXMiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwic2hpZnQiLCJkZWZlcnJlZE1vZHVsZXMiLCJhcHBseSIsImNoZWNrRGVmZXJyZWRNb2R1bGVzIiwicmVzdWx0IiwiZGVmZXJyZWRNb2R1bGUiLCJmdWxmaWxsZWQiLCJqIiwiZGVwSWQiLCJzcGxpY2UiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwicyIsImluc3RhbGxlZE1vZHVsZXMiLCJtYWluIiwiZXhwb3J0cyIsIm1vZHVsZSIsImwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicCIsImpzb25wQXJyYXkiLCJ3aW5kb3ciLCJvbGRKc29ucEZ1bmN0aW9uIiwic2xpY2UiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiX2NvbXBvbmVudHNfQ2hhbm5lbEdyb3VwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfY29tcG9uZW50c19TZWN0aW9uTWFwX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJfY29tcG9uZW50c19FbnRyeVR5cGVHcm91cF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiUmVsYXRlZEVudHJ5VHlwZXNGaWVsZCIsIl90aGlzIiwidGhpcyIsImFjdGl2ZVNlY3Rpb25zIiwiZmllbGRDb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjaGFubmVsR3JvdXBDb250YWluZXIiLCJjaGFubmVsR3JvdXAiLCJnZXRBY3RpdmVDaGFubmVscyIsInNlY3Rpb25NYXBEYXRhIiwiSlNPTiIsInBhcnNlIiwiZGF0YXNldCIsInJlbGF0ZWRFbnRyeVR5cGVzQ2hhbm5lbHMiLCJzZWN0aW9uTWFwIiwic2VjdGlvbnMiLCJlbnRyeVR5cGVzIiwiZW50cnlUeXBlc0dyb3VwQ29udGFpbmVyIiwiY29uc29sZSIsImxvZyIsImVudHJ5VHlwZUdyb3VwIiwic2V0RW50cnlUeXBlcyIsImdldEVudHJ5VHlwZXNCeUNoYW5uZWxBcnJheSIsInJlbmRlciIsInVwZGF0ZUFjdGl2ZVNlY3Rpb25zIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJldmVudERldGFpbCIsImRldGFpbCIsImFsbCIsImFjdGl2ZSIsImdldENoYW5uZWxzIiwiZmV0Y2hUZW1wbGF0ZXMiLCJzZWN0aW9uVWlkcyIsIm9wdHMiLCJjcmVkZW50aWFscyIsImhlYWRlcnMiLCJYLVJlcXVlc3RlZC1XaXRoIiwibWV0aG9kIiwiYm9keSIsInN0cmluZ2lmeSIsImZldGNoIiwiQWxsQ2hhbm5lbCIsIl9zdXBlciIsIm5vZGUiLCJfX2V4dGVuZHMiLCJjaGVja2JveENoYW5nZUhhbmRsZXIiLCJjaGFuZ2VFdmVudCIsInRhcmdldCIsImNoZWNrZWQiLCJldmVudCIsIkN1c3RvbUV2ZW50Iiwic2VjdGlvblVpZCIsInVpZCIsImJ1YmJsZXMiLCJjaGVja2JveCIsImRpc3BhdGNoRXZlbnQiLCJfQ2hhbm5lbF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiQ2hhbm5lbCIsInVpZE1hdGNoIiwibWF0Y2giLCJsYWJlbCIsImlkIiwiaW5uZXJUZXh0IiwidXBkYXRlQWN0aXZlU3RhdHVzIiwiX0FsbENoYW5uZWxfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIkNoYW5uZWxHcm91cCIsImNoZWNrYm94ZXMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hhbm5lbHMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJhY3RpdmVDaGFubmVscyIsImZpbHRlciIsImNoYW5uZWwiLCJFbnRyeVR5cGVHcm91cCIsImVudHJ5VHlwZSIsInRvSHRtbCIsImlubmVySFRNTCIsIlNlY3Rpb25NYXAiLCJnZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkIiwiZ2V0RW50cnlUeXBlc0J5U2VjdGlvblVpZEFycmF5IiwibWF0Y2hpbmdVaWQiLCJ1aWRzIiwiZm9yRWFjaCIsImNvbnRlbnQiLCJvcHRpb25zIiwiaG1yIiwidHJhbnNmb3JtIiwiaW5zZXJ0SW50byIsInVuZGVmaW5lZCIsImxvY2FscyJdLCJtYXBwaW5ncyI6ImFBQ0EsU0FBQUEsRUFBQUMsR0FRQSxJQVBBLElBTUFDLEVBQUFDLEVBTkFDLEVBQUFILEVBQUEsR0FDQUksRUFBQUosRUFBQSxHQUNBSyxFQUFBTCxFQUFBLEdBSUFNLEVBQUEsRUFBQUMsRUFBQSxHQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJKLEVBQUFDLEVBQUFH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UCxTQUFpQzVCLEdBQzdCLElBQU04QixFQUE0QmxGLEtBQUtlLFdBQVcwRCxPQUFPLFNBQUNHLEdBRXRELE9BREEzRCxRQUFRQyxJQUFJMEQsRUFBVXpCLFdBQVlDLEdBQzNCd0IsRUFBVXpCLGFBQWVDLElBRXBDLE9BQUk4QixHQUFlQSxFQUFZOUksT0FDcEI4SSxFQUdKLElBR0pILEVBQUF2SSxVQUFBeUksK0JBQVAsU0FBc0NFLEdBQXRDLElBQUFwRixFQUFBQyxLQUNVZSxFQUEyQixHQVFqQyxPQVBBb0UsRUFBS0MsUUFBUSxTQUFDaEMsR0FDVnJELEVBQUtpRiwwQkFBMEI1QixHQUFLZ0MsUUFBUSxTQUFDUixHQUN6QzNELFFBQVFDLElBQUkwRCxHQUNaN0QsRUFBV3pFLEtBQUtzSSxPQUlqQjdELEdBR0pnRSxFQUFBdkksVUFBQTZFLDRCQUFQLFNBQW1DK0MsR0FDL0IsSUFBTWUsRUFBaUJmLEVBQVNHLElBQUksU0FBQ0csR0FBc0IsT0FBQUEsRUFBUXRCLE1BQ25FLE9BQU9wRCxLQUFLaUYsK0JBQStCRSxJQUVuREosRUF6Q0E7Ozs7OENDSEEsSUFBQU0sRUFBYzlILDJNQUFRLDZNQUV0QixpQkFBQThILE1BQUEsRUFBNEN6SCxFQUFBMUIsRUFBU21KLEVBQUEsTUFPckQsSUFBQUMsRUFBQSxDQUFlQyxLQUFBLEVBRWZDLGVBUEFBLEVBUUFDLGdCQUFBQyxHQUVhbkkseURBQVEsK0NBQVJBLENBQTJEOEgsRUFBQUMsR0FFeEVELEVBQUFNLFNBQUEvSCxFQUFBRCxRQUFBMEgsRUFBQU0iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0ZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soZGF0YSkge1xuIFx0XHR2YXIgY2h1bmtJZHMgPSBkYXRhWzBdO1xuIFx0XHR2YXIgbW9yZU1vZHVsZXMgPSBkYXRhWzFdO1xuIFx0XHR2YXIgZXhlY3V0ZU1vZHVsZXMgPSBkYXRhWzJdO1xuXG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgcmVzb2x2ZXMgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKSB7XG4gXHRcdFx0XHRyZXNvbHZlcy5wdXNoKGluc3RhbGxlZENodW5rc1tjaHVua0lkXVswXSk7XG4gXHRcdFx0fVxuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vcmVNb2R1bGVzLCBtb2R1bGVJZCkpIHtcbiBcdFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHRcdH1cbiBcdFx0fVxuIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGRhdGEpO1xuXG4gXHRcdHdoaWxlKHJlc29sdmVzLmxlbmd0aCkge1xuIFx0XHRcdHJlc29sdmVzLnNoaWZ0KCkoKTtcbiBcdFx0fVxuXG4gXHRcdC8vIGFkZCBlbnRyeSBtb2R1bGVzIGZyb20gbG9hZGVkIGNodW5rIHRvIGRlZmVycmVkIGxpc3RcbiBcdFx0ZGVmZXJyZWRNb2R1bGVzLnB1c2guYXBwbHkoZGVmZXJyZWRNb2R1bGVzLCBleGVjdXRlTW9kdWxlcyB8fCBbXSk7XG5cbiBcdFx0Ly8gcnVuIGRlZmVycmVkIG1vZHVsZXMgd2hlbiBhbGwgY2h1bmtzIHJlYWR5XG4gXHRcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIFx0fTtcbiBcdGZ1bmN0aW9uIGNoZWNrRGVmZXJyZWRNb2R1bGVzKCkge1xuIFx0XHR2YXIgcmVzdWx0O1xuIFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgZGVmZXJyZWRNb2R1bGVzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0dmFyIGRlZmVycmVkTW9kdWxlID0gZGVmZXJyZWRNb2R1bGVzW2ldO1xuIFx0XHRcdHZhciBmdWxmaWxsZWQgPSB0cnVlO1xuIFx0XHRcdGZvcih2YXIgaiA9IDE7IGogPCBkZWZlcnJlZE1vZHVsZS5sZW5ndGg7IGorKykge1xuIFx0XHRcdFx0dmFyIGRlcElkID0gZGVmZXJyZWRNb2R1bGVbal07XG4gXHRcdFx0XHRpZihpbnN0YWxsZWRDaHVua3NbZGVwSWRdICE9PSAwKSBmdWxmaWxsZWQgPSBmYWxzZTtcbiBcdFx0XHR9XG4gXHRcdFx0aWYoZnVsZmlsbGVkKSB7XG4gXHRcdFx0XHRkZWZlcnJlZE1vZHVsZXMuc3BsaWNlKGktLSwgMSk7XG4gXHRcdFx0XHRyZXN1bHQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IGRlZmVycmVkTW9kdWxlWzBdKTtcbiBcdFx0XHR9XG4gXHRcdH1cbiBcdFx0cmV0dXJuIHJlc3VsdDtcbiBcdH1cblxuIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3NcbiBcdC8vIHVuZGVmaW5lZCA9IGNodW5rIG5vdCBsb2FkZWQsIG51bGwgPSBjaHVuayBwcmVsb2FkZWQvcHJlZmV0Y2hlZFxuIFx0Ly8gUHJvbWlzZSA9IGNodW5rIGxvYWRpbmcsIDAgPSBjaHVuayBsb2FkZWRcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdFwibWFpblwiOiAwXG4gXHR9O1xuXG4gXHR2YXIgZGVmZXJyZWRNb2R1bGVzID0gW107XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdHZhciBqc29ucEFycmF5ID0gd2luZG93W1wid2VicGFja0pzb25wXCJdID0gd2luZG93W1wid2VicGFja0pzb25wXCJdIHx8IFtdO1xuIFx0dmFyIG9sZEpzb25wRnVuY3Rpb24gPSBqc29ucEFycmF5LnB1c2guYmluZChqc29ucEFycmF5KTtcbiBcdGpzb25wQXJyYXkucHVzaCA9IHdlYnBhY2tKc29ucENhbGxiYWNrO1xuIFx0anNvbnBBcnJheSA9IGpzb25wQXJyYXkuc2xpY2UoKTtcbiBcdGZvcih2YXIgaSA9IDA7IGkgPCBqc29ucEFycmF5Lmxlbmd0aDsgaSsrKSB3ZWJwYWNrSnNvbnBDYWxsYmFjayhqc29ucEFycmF5W2ldKTtcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gb2xkSnNvbnBGdW5jdGlvbjtcblxuXG4gXHQvLyBhZGQgZW50cnkgbW9kdWxlIHRvIGRlZmVycmVkIGxpc3RcbiBcdGRlZmVycmVkTW9kdWxlcy5wdXNoKFswLFwidmVuZG9yXCJdKTtcbiBcdC8vIHJ1biBkZWZlcnJlZCBtb2R1bGVzIHdoZW4gcmVhZHlcbiBcdHJldHVybiBjaGVja0RlZmVycmVkTW9kdWxlcygpO1xuIiwiaW1wb3J0IElDaGFubmVsR3JvdXAgZnJvbSAnLi9pbnRlcmZhY2VzL0lDaGFubmVsR3JvdXAnO1xuaW1wb3J0IENoYW5uZWxHcm91cCBmcm9tICcuL2NvbXBvbmVudHMvQ2hhbm5lbEdyb3VwJztcbmltcG9ydCBJU2VjdGlvbk1hcCBmcm9tICcuL2ludGVyZmFjZXMvSVNlY3Rpb25NYXAnO1xuaW1wb3J0IElDaGFubmVsIGZyb20gJy4vaW50ZXJmYWNlcy9JQ2hhbm5lbCc7XG5pbXBvcnQgU2VjdGlvbk1hcCBmcm9tICcuL2NvbXBvbmVudHMvU2VjdGlvbk1hcCc7XG5pbXBvcnQgRW50cnlUeXBlR3JvdXAgZnJvbSAnLi9jb21wb25lbnRzL0VudHJ5VHlwZUdyb3VwJztcbmltcG9ydCBJRW50cnlUeXBlR3JvdXAgZnJvbSAnLi9pbnRlcmZhY2VzL0lFbnRyeVR5cGVHcm91cCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJlbGF0ZWRFbnRyeVR5cGVzRmllbGQge1xuICAgIHB1YmxpYyBjaGFubmVsR3JvdXA6IElDaGFubmVsR3JvdXA7XG4gICAgcHVibGljIGZpZWxkQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudDtcbiAgICBwdWJsaWMgZW50cnlUeXBlR3JvdXA6IElFbnRyeVR5cGVHcm91cDtcbiAgICBwcml2YXRlIHNlY3Rpb25NYXA6IElTZWN0aW9uTWFwO1xuICAgIHB1YmxpYyBhY3RpdmVTZWN0aW9uczogSUNoYW5uZWxbXTtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVNlY3Rpb25zID0gW107XG4gICAgICAgIHRoaXMuZmllbGRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjdHlwZXMtdW5pb25jby1yZWxhdGVkZW50cnl0eXBlcy1maWVsZHMtUmVsYXRlZEVudHJ5VHlwZS1zb3VyY2VzLWZpZWxkJyk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgY2hhbm5lbHMgc2VsZWN0IGFyZWFcbiAgICAgICAgY29uc3QgY2hhbm5lbEdyb3VwQ29udGFpbmVyOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXJlbGF0ZWQtZW50cnktdHlwZXMtY2hhbm5lbHNdJyk7XG4gICAgICAgIGlmIChjaGFubmVsR3JvdXBDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuY2hhbm5lbEdyb3VwID0gbmV3IENoYW5uZWxHcm91cChjaGFubmVsR3JvdXBDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IHRoaXMuY2hhbm5lbEdyb3VwLmdldEFjdGl2ZUNoYW5uZWxzKCk7IC8vLm1hcCgoY2hhbm5lbDogSUNoYW5uZWwpID0+IGNoYW5uZWwudWlkKTtcbiAgICAgICAgICAgIGNvbnN0IHNlY3Rpb25NYXBEYXRhOiBJU2VjdGlvbk1hcCA9IEpTT04ucGFyc2UoY2hhbm5lbEdyb3VwQ29udGFpbmVyLmRhdGFzZXQucmVsYXRlZEVudHJ5VHlwZXNDaGFubmVscyk7XG4gICAgICAgICAgICB0aGlzLnNlY3Rpb25NYXAgPSBuZXcgU2VjdGlvbk1hcChzZWN0aW9uTWFwRGF0YS5zZWN0aW9ucywgc2VjdGlvbk1hcERhdGEuZW50cnlUeXBlcyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBlbnRyeVR5cGVzR3JvdXBDb250YWluZXI6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZW50cnktdHlwZXMtc2VsZWN0LWFyZWFdJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGVudHJ5VHlwZXNHcm91cENvbnRhaW5lcik7XG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc2VjdGlvbk1hcCk7XG4gICAgICAgIGlmIChlbnRyeVR5cGVzR3JvdXBDb250YWluZXIpIHtcbiAgICAgICAgICAgIHRoaXMuZW50cnlUeXBlR3JvdXAgPSBuZXcgRW50cnlUeXBlR3JvdXAoZW50cnlUeXBlc0dyb3VwQ29udGFpbmVyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdGhpcy5lbnRyeVR5cGVHcm91cC5zZXRFbnRyeVR5cGVzKHRoaXMuc2VjdGlvbk1hcC5nZXRFbnRyeVR5cGVzQnlDaGFubmVsQXJyYXkodGhpcy5hY3RpdmVTZWN0aW9ucykpO1xuICAgICAgICAgICAgdGhpcy5lbnRyeVR5cGVHcm91cC5yZW5kZXIoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ldGhvZCBiaW5kaW5nXG4gICAgICAgIHRoaXMudXBkYXRlQWN0aXZlU2VjdGlvbnMgPSB0aGlzLnVwZGF0ZUFjdGl2ZVNlY3Rpb25zLmJpbmQodGhpcyk7XG5cbiAgICAgICAgLy8gRXZlbnQgTGlzdGVuZXJzXG4gICAgICAgIHRoaXMuZmllbGRDb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2hhbm5lbENoYW5nZScsIChlOiBDdXN0b21FdmVudCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZXZlbnREZXRhaWwgPSBlLmRldGFpbDtcbiAgICAgICAgICAgIGNvbnN0IHsgYWxsLCBhY3RpdmUgfSA9IGV2ZW50RGV0YWlsO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXZlbnREZXRhaWwpO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVTZWN0aW9ucyhhbGwsIGFjdGl2ZSk7IC8vIHNlY3Rpb25VaWQsIGFjdGl2ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuXG4gICAgfVxuXG4gICAgcHVibGljIHVwZGF0ZUFjdGl2ZVNlY3Rpb25zKGFsbDogYm9vbGVhbiwgYWN0aXZlOiBib29sZWFuKSB7XG4gICAgICAgIGlmIChhbGwpIHtcbiAgICAgICAgICAgIGlmIChhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVNlY3Rpb25zID0gdGhpcy5jaGFubmVsR3JvdXAuZ2V0Q2hhbm5lbHMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVTZWN0aW9ucyA9IHRoaXMuY2hhbm5lbEdyb3VwLmdldEFjdGl2ZUNoYW5uZWxzKCk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZW50cnlUeXBlcyA9IHRoaXMuc2VjdGlvbk1hcC5nZXRFbnRyeVR5cGVzQnlDaGFubmVsQXJyYXkodGhpcy5hY3RpdmVTZWN0aW9ucyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGVudHJ5VHlwZXMpO1xuICAgICAgICBkZWJ1Z2dlcjtcbiAgICAgICAgdGhpcy5lbnRyeVR5cGVHcm91cC5zZXRFbnRyeVR5cGVzKGVudHJ5VHlwZXMpO1xuICAgICAgICB0aGlzLmVudHJ5VHlwZUdyb3VwLnJlbmRlcigpO1xuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmFjdGl2ZVNlY3Rpb25zKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGZldGNoVGVtcGxhdGVzKHNlY3Rpb25VaWRzOiBzdHJpbmdbXSwgZW50cnlUeXBlczogc3RyaW5nW10pOiBQcm9taXNlPFJlc3BvbnNlPiB7XG4gICAgICAgIGNvbnN0IG9wdHM6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgICAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsXG4gICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLFxuICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIFwic2VjdGlvblVpZHNcIjogc2VjdGlvblVpZHMsXG4gICAgICAgICAgICAgICAgXCJlbnRyeVR5cGVzXCI6IGVudHJ5VHlwZXNcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgICAgIGNvbnNvbGUubG9nKG9wdHMpO1xuICAgICAgICByZXR1cm4gZmV0Y2goJy9hZG1pbi9yZWxhdGVkLWVudHJ5LXR5cGVzL3R5cGVzJywgb3B0cyk7XG4gICAgICAgIC8vIC50aGVuKHJlc3AgPT56IHJlc3AudGV4dCgpKVxuICAgICAgICAvLyAudGhlbihkYXRhID0+IHJlc29sdmUoZGF0YSkpO1xuICAgIH1cbn1cblxubmV3IFJlbGF0ZWRFbnRyeVR5cGVzRmllbGQoKTtcblxuLy8gY29uc3QgYWpheE9wdHMgPSB7XG4vLyAgICAgY3JlZGVudGlhbHM6ICdzYW1lLW9yaWdpbicsXG4vLyAgICAgaGVhZGVyczoge1xuLy8gICAgICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCcsXG4vLyAgICAgfVxuLy8gfTtcblxuLy8gY2xhc3MgRW50cnlUeXBlIHtcbi8vICAgICBjb25zdHJ1Y3RvcigpIHtcbi8vICAgICAgICAgdGhpcy5maWVsZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyN0eXBlcy11bmlvbmNvLXJlbGF0ZWRlbnRyeXR5cGVzLWZpZWxkcy1FbnRyeVR5cGUtc291cmNlcy1maWVsZCcpO1xuLy8gICAgICAgICBpZiAodGhpcy5maWVsZENvbnRhaW5lcikge1xuLy8gICAgICAgICAgICAgdGhpcy5zZWN0aW9uQ2hlY2tib3hlcyA9IHRoaXMuZmllbGRDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJyk7XG4vLyAgICAgICAgICAgICBjb25zb2xlLmxvZyh0aGlzLnNlY3Rpb25DaGVja2JveGVzKTtcbi8vICAgICAgICAgICAgIGlmICh0aGlzLnNlY3Rpb25DaGVja2JveGVzKSB7XG4vLyAgICAgICAgICAgICAgICAgdGhpcy5zZWN0aW9uQ2hlY2tib3hlcy5mb3JFYWNoKGNoZWNrYm94ID0+IGNoZWNrYm94LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuaGFuZGxlU291cmNlc0NoYW5nZS5iaW5kKHRoaXMpKSk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICB0aGlzLmVudHJ5VHlwZXNTZWxlY3RBcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtZW50cnktdHlwZXMtc2VsZWN0LWFyZWFdJyk7XG4vLyAgICAgICAgIHRoaXMuZ2V0U2VsZWN0ZWRTZWN0aW9ucyA9IHRoaXMuZ2V0U2VsZWN0ZWRTZWN0aW9ucy5iaW5kKHRoaXMpO1xuLy8gICAgIH1cblxuLy8gICAgIGdldFNlbGVjdGVkU2VjdGlvbnMoKSB7XG4vLyAgICAgICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuZmlsdGVyLmNhbGwodGhpcy5zZWN0aW9uQ2hlY2tib3hlcywgY2hlY2tib3ggPT4ge1xuLy8gICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjaGVja2JveCk7XG4vLyAgICAgICAgICAgICByZXR1cm4gY2hlY2tib3guY2hlY2tlZCB8fCBmYWxzZTtcbi8vICAgICAgICAgfSkubWFwKGNoZWNrYm94ID0+IHtcbi8vICAgICAgICAgICAgIHJldHVybiBjaGVja2JveC52YWx1ZTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuXG4vLyAgICAgZ2V0U2VsZWN0ZWRFbnRyeVR5cGVzKCkge1xuLy8gICAgICAgICBjb25zdCBlbnRyeVR5cGVzU2VjdGlvbiA9IHRoaXMuZW50cnlUeXBlc1NlbGVjdEFyZWEucXVlcnlTZWxlY3RvcignZGl2Jyk7XG4vLyAgICAgICAgIGlmIChlbnRyeVR5cGVzU2VjdGlvbikge1xuLy8gICAgICAgICAgICAgY29uc3QgZW50cnlUeXBlQ2hlY2tib3hlcyA9IGVudHJ5VHlwZXNTZWN0aW9uLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpO1xuLy8gICAgICAgICAgICAgY29uc29sZS5sb2coZW50cnlUeXBlQ2hlY2tib3hlcyk7XG4vLyAgICAgICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKGVudHJ5VHlwZUNoZWNrYm94ZXMsIGNoZWNrYm94ID0+IHtcbi8vICAgICAgICAgICAgICAgICByZXR1cm4gY2hlY2tib3guY2hlY2tlZDtcbi8vICAgICAgICAgICAgIH0pLm1hcChjaGVja2JveCA9PiB7XG4vLyAgICAgICAgICAgICAgICAgcmV0dXJuIGNoZWNrYm94LnZhbHVlO1xuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cblxuLy8gICAgICAgICByZXR1cm4gbnVsbDtcbi8vICAgICB9XG5cbi8vICAgICBoYW5kbGVTb3VyY2VzQ2hhbmdlKGUpIHtcbi8vICAgICAgICAgY29uc3Qgc2VsZWN0ZWRTZWN0aW9ucyA9IHRoaXMuZ2V0U2VsZWN0ZWRTZWN0aW9ucygpO1xuLy8gICAgICAgICBjb25zdCBzZWxlY3RlZEVudHJ5VHlwZXMgPSB0aGlzLmdldFNlbGVjdGVkRW50cnlUeXBlcygpO1xuXG4vLyAgICAgICAgIGlmIChzZWxlY3RlZFNlY3Rpb25zLmxlbmd0aCA8IDEpIHtcbi8vICAgICAgICAgICAgIHRoaXMuZW50cnlUeXBlc1NlbGVjdEFyZWEuaW5uZXJIVE1MID0gJyc7XG4vLyAgICAgICAgIH1cbi8vICAgICAgICAgQXBpQ2xpZW50LmdldFRlbXBsYXRlKHNlbGVjdGVkU2VjdGlvbnMsIHNlbGVjdGVkRW50cnlUeXBlcylcbi8vICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuLy8gICAgICAgICAgICAgICAgIHRoaXMuZW50cnlUeXBlc1NlbGVjdEFyZWEuaW5uZXJIVE1MID0gZGF0YTtcbi8vICAgICAgICAgICAgIH0pO1xuLy8gICAgIH1cbi8vIH1cblxuLy8gY2xhc3MgQXBpQ2xpZW50IHtcbi8vICAgICBzdGF0aWMgZ2V0VGVtcGxhdGUoc2VjdGlvblVpZHMsIGVudHJ5VHlwZXMpIHtcbi8vICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbi8vICAgICAgICAgICAgIGxldCBvcHRzID0ge1xuLy8gICAgICAgICAgICAgICAgIGNyZWRlbnRpYWxzOiAnc2FtZS1vcmlnaW4nLFxuLy8gICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcbi8vICAgICAgICAgICAgICAgICAgICAgJ1gtUmVxdWVzdGVkLVdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLFxuLy8gICAgICAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4vLyAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuLy8gICAgICAgICAgICAgICAgICAgICBcInNlY3Rpb25VaWRzXCI6IHNlY3Rpb25VaWRzLFxuLy8gICAgICAgICAgICAgICAgICAgICBcImVudHJ5VHlwZXNcIjogZW50cnlUeXBlc1xuLy8gICAgICAgICAgICAgICAgIH0pXG4vLyAgICAgICAgICAgICB9O1xuLy8gICAgICAgICAgICAgY29uc29sZS5sb2cob3B0cyk7XG4vLyAgICAgICAgICAgICBmZXRjaCgnL2FkbWluL3JlbGF0ZWQtZW50cnktdHlwZXMvdHlwZXMnLCBvcHRzKVxuLy8gICAgICAgICAgICAgICAgIC50aGVuKHJlc3AgPT4gcmVzcC50ZXh0KCkpXG4vLyAgICAgICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiByZXNvbHZlKGRhdGEpKTtcbi8vICAgICAgICAgfSk7XG4vLyAgICAgfVxuLy8gfVxuXG4vLyAoZnVuY3Rpb24gKCQsIHdpbmRvdywgZG9jdW1lbnQsIHVuZGVmaW5lZCkge1xuXG4vLyAgICAgdmFyIHBsdWdpbk5hbWUgPSBcIlJlbGF0ZWRFbnRyeVR5cGVzXCIsXG4vLyAgICAgICAgIGRlZmF1bHRzID0ge307XG5cbi8vICAgICAvLyBQbHVnaW4gY29uc3RydWN0b3Jcbi8vICAgICBmdW5jdGlvbiBQbHVnaW4oZWxlbWVudCwgb3B0aW9ucykge1xuLy8gICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuXG4vLyAgICAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBkZWZhdWx0cywgb3B0aW9ucyk7XG5cbi8vICAgICAgICAgdGhpcy5fZGVmYXVsdHMgPSBkZWZhdWx0cztcbi8vICAgICAgICAgdGhpcy5fbmFtZSA9IHBsdWdpbk5hbWU7XG5cbi8vICAgICAgICAgdGhpcy5pbml0KCk7XG4vLyAgICAgfVxuXG4vLyAgICAgUGx1Z2luLnByb3RvdHlwZSA9IHtcblxuLy8gICAgICAgICBpbml0OiBmdW5jdGlvbiAoaWQpIHtcbi8vICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbi8vICAgICAgICAgICAgICQoZnVuY3Rpb24gKCkge1xuXG4vLyAgICAgICAgICAgICAgICAgLyogLS0gX3RoaXMub3B0aW9ucyBnaXZlcyB1cyBhY2Nlc3MgdG8gdGhlICRqc29uVmFycyB0aGF0IG91ciBGaWVsZFR5cGUgcGFzc2VkIGRvd24gdG8gdXMgKi9cblxuLy8gICAgICAgICAgICAgfSk7XG4vLyAgICAgICAgIH1cbi8vICAgICB9O1xuXG4vLyAgICAgLy8gQSByZWFsbHkgbGlnaHR3ZWlnaHQgcGx1Z2luIHdyYXBwZXIgYXJvdW5kIHRoZSBjb25zdHJ1Y3Rvcixcbi8vICAgICAvLyBwcmV2ZW50aW5nIGFnYWluc3QgbXVsdGlwbGUgaW5zdGFudGlhdGlvbnNcbi8vICAgICAkLmZuW3BsdWdpbk5hbWVdID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbi8vICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4vLyAgICAgICAgICAgICBpZiAoISQuZGF0YSh0aGlzLCBcInBsdWdpbl9cIiArIHBsdWdpbk5hbWUpKSB7XG4vLyAgICAgICAgICAgICAgICAgJC5kYXRhKHRoaXMsIFwicGx1Z2luX1wiICsgcGx1Z2luTmFtZSxcbi8vICAgICAgICAgICAgICAgICAgICAgbmV3IFBsdWdpbih0aGlzLCBvcHRpb25zKSk7XG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH0pO1xuLy8gICAgIH07XG5cbi8vIH0pKGpRdWVyeSwgd2luZG93LCBkb2N1bWVudCk7XG5cbi8vIHdpbmRvdy5SZWxhdGVkRW50cnlUeXBlc0ZpZWxkID0gUmVsYXRlZEVudHJ5VHlwZXNGaWVsZDsiLCJpbXBvcnQgSUNoYW5uZWwgZnJvbSBcIi4uL2ludGVyZmFjZXMvSUNoYW5uZWxcIjtcbmltcG9ydCBDaGFubmVsIGZyb20gJy4vQ2hhbm5lbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEFsbENoYW5uZWwgZXh0ZW5kcyBDaGFubmVsIGltcGxlbWVudHMgSUNoYW5uZWwge1xuICAgIGNvbnN0cnVjdG9yKG5vZGU6IEhUTUxJbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgc3VwZXIobm9kZSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNoZWNrYm94Q2hhbmdlSGFuZGxlcihjaGFuZ2VFdmVudDogRXZlbnQpOiBib29sZWFuIHtcbiAgICAgICAgY29uc3QgdGFyZ2V0OiBIVE1MSW5wdXRFbGVtZW50ID0gY2hhbmdlRXZlbnQudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdGFyZ2V0LmNoZWNrZWQ7XG5cbiAgICAgICAgY29uc3QgZXZlbnQgPSBuZXcgQ3VzdG9tRXZlbnQoJ2NoYW5uZWxDaGFuZ2UnLCB7XG4gICAgICAgICAgICBkZXRhaWw6IHtcbiAgICAgICAgICAgICAgICBzZWN0aW9uVWlkOiB0aGlzLnVpZCxcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRoaXMuYWN0aXZlLFxuICAgICAgICAgICAgICAgIGFsbDogdHJ1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWVcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2hlY2tib3guZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgfVxufSIsImltcG9ydCBJQ2hhbm5lbCBmcm9tIFwiLi4vaW50ZXJmYWNlcy9JQ2hhbm5lbFwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFubmVsIGltcGxlbWVudHMgSUNoYW5uZWwge1xuICAgIHByb3RlY3RlZCBjaGVja2JveDogSFRNTElucHV0RWxlbWVudDtcbiAgICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICAgIHB1YmxpYyBsYWJlbDogc3RyaW5nO1xuICAgIHB1YmxpYyB1aWQ6IHN0cmluZztcbiAgICBwdWJsaWMgYWN0aXZlOiBib29sZWFuO1xuXG4gICAgY29uc3RydWN0b3Iobm9kZTogSFRNTElucHV0RWxlbWVudCkge1xuICAgICAgICB0aGlzLmNoZWNrYm94ID0gbm9kZTtcbiAgICAgICAgdGhpcy5hY3RpdmUgPSBub2RlLmNoZWNrZWQ7XG5cbiAgICAgICAgY29uc3QgdWlkTWF0Y2ggPSBub2RlLnZhbHVlLm1hdGNoKC9zZWN0aW9uOiguKikvKTtcbiAgICAgICAgXG4gICAgICAgIGlmICh1aWRNYXRjaCAmJiB1aWRNYXRjaC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMudWlkID0gdWlkTWF0Y2hbMV07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm5hbWUgPSBub2RlLnZhbHVlO1xuICAgICAgICBjb25zdCBsYWJlbDogSFRNTExhYmVsRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGxhYmVsW2Zvcj1cIiR7dGhpcy5jaGVja2JveC5pZH1cIl1gKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChsYWJlbCkge1xuICAgICAgICAgICAgdGhpcy5sYWJlbCA9IGxhYmVsLmlubmVyVGV4dDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ldGhvZCBiaW5kaW5nXG4gICAgICAgIHRoaXMuY2hlY2tib3hDaGFuZ2VIYW5kbGVyID0gdGhpcy5jaGVja2JveENoYW5nZUhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVTdGF0dXMgPSB0aGlzLnVwZGF0ZUFjdGl2ZVN0YXR1cy5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuY2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5jaGVja2JveENoYW5nZUhhbmRsZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyB1cGRhdGVBY3RpdmVTdGF0dXMoKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlID0gdGhpcy5jaGVja2JveC5jaGVja2VkO1xuICAgIH1cblxuICAgIHB1YmxpYyBjaGVja2JveENoYW5nZUhhbmRsZXIoY2hhbmdlRXZlbnQ6IEV2ZW50KTogYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHRhcmdldDogSFRNTElucHV0RWxlbWVudCA9IGNoYW5nZUV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICB0aGlzLmFjdGl2ZSA9IHRhcmdldC5jaGVja2VkO1xuXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IEN1c3RvbUV2ZW50KCdjaGFubmVsQ2hhbmdlJywge1xuICAgICAgICAgICAgZGV0YWlsOiB7XG4gICAgICAgICAgICAgICAgc2VjdGlvblVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0aGlzLmFjdGl2ZSxcbiAgICAgICAgICAgICAgICBhbGw6IGZhbHNlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgYnViYmxlczogdHJ1ZVxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdGhpcy5jaGVja2JveC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICB9XG59IiwiaW1wb3J0IElDaGFubmVsR3JvdXAgZnJvbSAnLi4vaW50ZXJmYWNlcy9JQ2hhbm5lbEdyb3VwJztcbmltcG9ydCBJQ2hhbm5lbCBmcm9tICcuLi9pbnRlcmZhY2VzL0lDaGFubmVsJztcbmltcG9ydCBDaGFubmVsIGZyb20gJy4vQ2hhbm5lbCc7XG5pbXBvcnQgQWxsQ2hhbm5lbCBmcm9tICcuL0FsbENoYW5uZWwnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDaGFubmVsR3JvdXAgaW1wbGVtZW50cyBJQ2hhbm5lbEdyb3VwIHtcbiAgICBwcml2YXRlIGNoYW5uZWxzOiBJQ2hhbm5lbFtdO1xuICAgIHByaXZhdGUgbm9kZTogSFRNTERpdkVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3Rvcihub2RlOiBIVE1MRGl2RWxlbWVudCkge1xuICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICBjb25zdCBjaGVja2JveGVzOiBOb2RlTGlzdE9mPEhUTUxJbnB1dEVsZW1lbnQ+ID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKTtcbiAgICAgICAgdGhpcy5jaGFubmVscyA9IEFycmF5LmZyb20oY2hlY2tib3hlcylcbiAgICAgICAgICAgIC5tYXAoKGNoZWNrYm94OiBIVE1MSW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrYm94LnZhbHVlID09PSAnKicpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBBbGxDaGFubmVsKGNoZWNrYm94KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENoYW5uZWwoY2hlY2tib3gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyBNZXRob2QgYmluZGluZ1xuICAgICAgICB0aGlzLmdldEFjdGl2ZUNoYW5uZWxzID0gdGhpcy5nZXRBY3RpdmVDaGFubmVscy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmdldENoYW5uZWxzID0gdGhpcy5nZXRDaGFubmVscy5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRDaGFubmVscygpOiBJQ2hhbm5lbFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbm5lbHM7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEFjdGl2ZUNoYW5uZWxzKCk6IElDaGFubmVsW10ge1xuICAgICAgICBjb25zdCBhY3RpdmVDaGFubmVscyA9IHRoaXMuY2hhbm5lbHMuZmlsdGVyKChjaGFubmVsOiBJQ2hhbm5lbCkgPT4ge1xuICAgICAgICAgICAgY2hhbm5lbC51cGRhdGVBY3RpdmVTdGF0dXMoKTtcbiAgICAgICAgICAgIHJldHVybiBjaGFubmVsLmFjdGl2ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ2dldEFjdGl2ZUNoYW5uZWxzJywgYWN0aXZlQ2hhbm5lbHMpO1xuICAgICAgICByZXR1cm4gYWN0aXZlQ2hhbm5lbHM7XG4gICAgfVxufSIsImltcG9ydCBJRW50cnlUeXBlR3JvdXAgZnJvbSAnLi4vaW50ZXJmYWNlcy9JRW50cnlUeXBlR3JvdXAnO1xuaW1wb3J0IElFbnRyeVR5cGUgZnJvbSAnLi4vaW50ZXJmYWNlcy9JRW50cnlUeXBlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRW50cnlUeXBlR3JvdXAgaW1wbGVtZW50cyBJRW50cnlUeXBlR3JvdXAge1xuICAgIHByaXZhdGUgZW50cnlUeXBlczogSUVudHJ5VHlwZVtdO1xuICAgIHByaXZhdGUgbm9kZTogSFRNTERpdkVsZW1lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihlbnRyeVR5cGVzR3JvdXBDb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHRoaXMubm9kZSA9IGVudHJ5VHlwZXNHcm91cENvbnRhaW5lcjtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVuZGVyKCk6IHZvaWQge1xuICAgICAgICBsZXQgZW50cnlUeXBlcyA9IHRoaXMuZW50cnlUeXBlcy5tYXAoKGVudHJ5VHlwZTogSUVudHJ5VHlwZSkgPT4gZW50cnlUeXBlLnRvSHRtbCgpKTtcbiAgICAgICAgY29uc29sZS5sb2coZW50cnlUeXBlcyk7XG4gICAgICAgIHRoaXMubm9kZS5pbm5lckhUTUwgPSBgPGgxPkVudHJ5VHlwZXM8L2gxPjx1bD5cbiAgICAgICAgICAgICR7ZW50cnlUeXBlc31cbiAgICAgICAgPC91bD5gO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHRoaXMpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRFbnRyeVR5cGVzKGVudHJ5VHlwZXM6IElFbnRyeVR5cGVbXSk6IHZvaWQge1xuICAgICAgICB0aGlzLmVudHJ5VHlwZXMgPSBlbnRyeVR5cGVzO1xuICAgIH1cbn0iLCJpbXBvcnQgSVNlY3Rpb25NYXAgZnJvbSBcIi4uL2ludGVyZmFjZXMvSVNlY3Rpb25NYXBcIjtcbmltcG9ydCBJRW50cnlUeXBlIGZyb20gJy4uL2ludGVyZmFjZXMvSUVudHJ5VHlwZSc7XG5pbXBvcnQgSUNoYW5uZWwgZnJvbSAnLi4vaW50ZXJmYWNlcy9JQ2hhbm5lbCc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb25NYXAgaW1wbGVtZW50cyBJU2VjdGlvbk1hcCB7XG4gICAgcHVibGljIHNlY3Rpb25zOiBJQ2hhbm5lbFtdO1xuICAgIHB1YmxpYyBlbnRyeVR5cGVzOiBJRW50cnlUeXBlW107XG5cbiAgICBjb25zdHJ1Y3RvcihzZWN0aW9uczogSUNoYW5uZWxbXSwgZW50cnlUeXBlczogSUVudHJ5VHlwZVtdKSB7XG4gICAgICAgIHRoaXMuc2VjdGlvbnMgPSBzZWN0aW9ucztcbiAgICAgICAgdGhpcy5lbnRyeVR5cGVzID0gZW50cnlUeXBlcztcblxuICAgICAgICB0aGlzLmdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWQgPSB0aGlzLmdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5nZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkQXJyYXkgPSB0aGlzLmdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWRBcnJheS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmdldEVudHJ5VHlwZXNCeUNoYW5uZWxBcnJheSA9IHRoaXMuZ2V0RW50cnlUeXBlc0J5Q2hhbm5lbEFycmF5LmJpbmQodGhpcyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWQodWlkOiBzdHJpbmcpOiBJRW50cnlUeXBlW10ge1xuICAgICAgICBjb25zdCBtYXRjaGluZ1VpZDogSUVudHJ5VHlwZVtdID0gdGhpcy5lbnRyeVR5cGVzLmZpbHRlcigoZW50cnlUeXBlOiBJRW50cnlUeXBlKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlbnRyeVR5cGUuc2VjdGlvblVpZCwgdWlkKTtcbiAgICAgICAgICAgIHJldHVybiBlbnRyeVR5cGUuc2VjdGlvblVpZCA9PT0gdWlkO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKG1hdGNoaW5nVWlkICYmIG1hdGNoaW5nVWlkLmxlbmd0aCkge1xuICAgICAgICAgICAgcmV0dXJuIG1hdGNoaW5nVWlkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkQXJyYXkodWlkczogc3RyaW5nW10pOiBJRW50cnlUeXBlW10ge1xuICAgICAgICBjb25zdCBlbnRyeVR5cGVzOiBJRW50cnlUeXBlW10gPSBbXTtcbiAgICAgICAgdWlkcy5mb3JFYWNoKCh1aWQ6IHN0cmluZykgPT4ge1xuICAgICAgICAgICAgdGhpcy5nZXRFbnRyeVR5cGVzQnlTZWN0aW9uVWlkKHVpZCkuZm9yRWFjaCgoZW50cnlUeXBlOiBJRW50cnlUeXBlKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZW50cnlUeXBlKTtcbiAgICAgICAgICAgICAgICBlbnRyeVR5cGVzLnB1c2goZW50cnlUeXBlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gZW50cnlUeXBlcztcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0RW50cnlUeXBlc0J5Q2hhbm5lbEFycmF5KGNoYW5uZWxzOiBJQ2hhbm5lbFtdKTogSUVudHJ5VHlwZVtdIHtcbiAgICAgICAgY29uc3QgdWlkczogc3RyaW5nW10gPSBjaGFubmVscy5tYXAoKGNoYW5uZWw6IElDaGFubmVsKSA9PiBjaGFubmVsLnVpZCk7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEVudHJ5VHlwZXNCeVNlY3Rpb25VaWRBcnJheSh1aWRzKTtcbiAgICB9XG59IiwiXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9lbWJlZGRlZCEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL2ZpZWxkLnNjc3NcIik7XG5cbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXG52YXIgdHJhbnNmb3JtO1xudmFyIGluc2VydEludG87XG5cblxuXG52YXIgb3B0aW9ucyA9IHtcImhtclwiOnRydWV9XG5cbm9wdGlvbnMudHJhbnNmb3JtID0gdHJhbnNmb3JtXG5vcHRpb25zLmluc2VydEludG8gPSB1bmRlZmluZWQ7XG5cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4uLy4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvbGliL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCBvcHRpb25zKTtcblxuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cbmlmKG1vZHVsZS5ob3QpIHtcblx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4uLy4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLi8uLi9ub2RlX21vZHVsZXMvcG9zdGNzcy1sb2FkZXIvc3JjL2luZGV4LmpzPz9lbWJlZGRlZCEuLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvbGliL2xvYWRlci5qcyEuL2ZpZWxkLnNjc3NcIiwgZnVuY3Rpb24oKSB7XG5cdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLi8uLi9ub2RlX21vZHVsZXMvbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4vZGlzdC9sb2FkZXIuanMhLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi4vLi4vbm9kZV9tb2R1bGVzL3Bvc3Rjc3MtbG9hZGVyL3NyYy9pbmRleC5qcz8/ZW1iZWRkZWQhLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2xpYi9sb2FkZXIuanMhLi9maWVsZC5zY3NzXCIpO1xuXG5cdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cblx0XHR2YXIgbG9jYWxzID0gKGZ1bmN0aW9uKGEsIGIpIHtcblx0XHRcdHZhciBrZXksIGlkeCA9IDA7XG5cblx0XHRcdGZvcihrZXkgaW4gYSkge1xuXHRcdFx0XHRpZighYiB8fCBhW2tleV0gIT09IGJba2V5XSkgcmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRpZHgrKztcblx0XHRcdH1cblxuXHRcdFx0Zm9yKGtleSBpbiBiKSBpZHgtLTtcblxuXHRcdFx0cmV0dXJuIGlkeCA9PT0gMDtcblx0XHR9KGNvbnRlbnQubG9jYWxzLCBuZXdDb250ZW50LmxvY2FscykpO1xuXG5cdFx0aWYoIWxvY2FscykgdGhyb3cgbmV3IEVycm9yKCdBYm9ydGluZyBDU1MgSE1SIGR1ZSB0byBjaGFuZ2VkIGNzcy1tb2R1bGVzIGxvY2Fscy4nKTtcblxuXHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0fSk7XG5cblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59Il0sInNvdXJjZVJvb3QiOiIifQ==